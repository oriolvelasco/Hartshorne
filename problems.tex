\documentclass[12pt]{article}

\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{enumitem}
\usepackage{empheq}
\usepackage{tikz-cd}

\newcommand{\N}{\ensuremath{\mathbb{N}}}
\newcommand{\Z}{\ensuremath{\mathbb{Z}}}
\newcommand{\R}{\ensuremath{\mathbb{R}}}
\newcommand{\Q}{\ensuremath{\mathbb{Q}}}
\newcommand{\C}{\ensuremath{\mathbb{C}}}
\newcommand{\imp}{\ensuremath{\Rightarrow}}
\newcommand{\ip}{\ensuremath{\mathfrak{p}}}
\newcommand{\iq}{\ensuremath{\mathfrak{q}}}
\newcommand{\im}{\ensuremath{\mathfrak{m}}}
\newcommand{\ia}{\ensuremath{\mathfrak{a}}}
\newcommand{\ib}{\ensuremath{\mathfrak{b}}}
\newcommand{\Spec}{\ensuremath{\text{Spec}}}
\newcommand{\ima}{\ensuremath{\mathrm{im}}}
\newcommand{\locO}{\ensuremath{\mathcal{O}}}


\newcommand*\closure[1]{\overline{#1}}

\newtheorem{ex}{Exercise}[section]
\theoremstyle{definition}
\newtheorem*{sol}{Solution}

\DeclareFontFamily{U}{BOONDOX-calo}{\skewchar\font=45 }
\DeclareFontShape{U}{BOONDOX-calo}{m}{n}{
  <-> s*[1.00] BOONDOX-r-calo}{}
\DeclareFontShape{U}{BOONDOX-calo}{b}{n}{
  <-> s*[1.00] BOONDOX-b-calo}{}
\DeclareMathAlphabet{\mathcalboondox}{U}{BOONDOX-calo}{m}{n}
\SetMathAlphabet{\mathcalboondox}{bold}{U}{BOONDOX-calo}{b}{n}
\DeclareMathAlphabet{\mathbcalboondox}{U}{BOONDOX-calo}{b}{n}

\newcommand{\sF}{\ensuremath{\mathcalboondox{F}}}
\newcommand{\sG}{\ensuremath{\mathcalboondox{G}}}
\newcommand{\sA}{\ensuremath{\mathcalboondox{A}}}
\newcommand{\sH}{\ensuremath{\mathcalboondox{H}}}
\newcommand{\sI}{\ensuremath{\mathcalboondox{I}}}

\usepackage{geometry}
 \geometry{
 a4paper,
 total={170mm,257mm},
 left=20mm,
 top=20mm,
 }



\begin{document}

\title{Exercises Hartshorne}
\author{Oriol Velasco Falguera}
\maketitle

\section{Sheaves}

\begin{ex}
	Let $A$ be an abelian group, and define the constant presheaf associated to $A$ on the topological space $X$ to be the presheaf $U \mapsto A$ for all $U \neq \varnothing$, with restriction maps the identity. Show that the constant sheaf $\sA$ defined in the text is the sheaf associated to this presheaf.
\end{ex}

\begin{sol}
	Let $sF$ denote the constant presheaf. Let's first see that each stalk $\sF_P$ is a copy of $A$. Indeed, the elements of $\sF_P$ are represented by pairs $\langle U, s \rangle$, with $U$ open neighbourhood of $P$ and $s \in A$. As the restriction maps are the identity, two pairs $\langle U,s \rangle$ and $\langle V, t \rangle$ represent the same element if and only if $s = t$, so $\sF_P = A$.

	Let $s$ be an application from $U$ to $\bigcup_{P \in U} \sF_P$ satisfying properties (1) and (2) from the definition of associated sheaf. By (1), $s(P) \in \sF_P$ is an element of $A$, and therefore $s$ can be regarded as an application from $U$ to $A$ (that we will denote $s'$). In addition, let $B \subseteq A$. For each $P \in s'^{-1}(B), \, \exists V_{P}$ neighbourhood of $P$ such that $s'(V_P) = t \in B$. Then $s'^{-1}(B) = \bigcup_{P \in s'^{-1}(B)} V_P$ which is open. We have proved that the antiimage of every subset is open and therefore $s'$ is continuos with $A$ being given the discrete topology.

	Reciprocally, any countinuous application $s'$ from $U$ to $A$ can be regarded as an application $s$ from $U$ to $\bigcup_{P \in U} \sF_P$, defining $s(P) = s'(P) \in \sF_P$. This assignation guarantees that $s$ satisfies (1). In addition, for each $P \in U$, the set $V = s'^{-1}(s'(P))$ is an open neighbourhood of $P$ (by continuity of s'), and every $Q \in V$ has the same image $s'(P)$, which proves that $s$ satisfies (2).

	In conclusion, $\sF^{+}(U)$ is the group of continuous maps from $U$ into $A$, and therefore $\sF^{+}$ is indeed the sheaf $\sA$ defined in the text.
\end{sol}

\begin{ex}
	\begin{enumerate}[label=\alph*)]
		\item For any morphism of sheaves $\varphi: \sF \to \sG$ show that for each point $P$, $(\ker \varphi)_P = \ker(\varphi_P)$ and $(\ima \varphi)_P = \ima (\varphi_P)$.
		\item Show that $\varphi$ is injective (respectively surjective) if and only if the induced map on the stalks $\varphi_P$ is injective (respectilevy surjective) for all $P$.
		\item Show that a sequence $\dots \xrightarrow[]{} \sF^{i-1} \xrightarrow[]{\varphi^{i-1}} \sF^{i} \xrightarrow[]{\varphi^{i}} \sF^{i+1} \xrightarrow[]{} \dots$ of sheaves and morphisms is exact if and only if for each $P \in X$ the corresponding sequence of stalks is exact as a sequence of abelian groups.
	\end{enumerate}
\end{ex}

\begin{sol}
	\begin{enumerate}[label=\alph*)]
		\item $(\ker \varphi)_P = \{(U,s), \, s \in \ker(\varphi(U))\}$, modulo the usual germ equivalence relationship. Thus it can be regarded as a subset of $\sF_P$ as $\ker(\varphi(U)) \subseteq \sF(U)$. On the other side $\ker(\varphi_P)$ is a subset of $\sF_P$. To see that the two sets are equal it's enough to check the double inclusion. Let $\overline{(U,s)} \in (\ker \varphi)_P$. Then, $\varphi_P(\overline{(U,s)}) = \overline{(U, (\varphi(U))(s))} = \overline{(U,0)} = 0 \imp \overline{(U,s)} \in \ker(\varphi_P)$. Reciprocally, given $\overline{(U,s)} \in \ker(\varphi_P) \imp \exists V \subset U$ such that $\varphi(U)(s)|_V = 0$. As restrictions commute with morphisms of sheaves, $ \varphi(V)(s|_V) = \varphi(U)(s)|_V = 0$. Then, $\overline{(U,s)} = \overline{(V,s|_V)} \in (\ker\varphi)_P$. In conclusion, $(\ker \varphi)_P = \ker(\varphi_P)$.

		As $\sF_P = \sF^{+}_P$, $(\ima \varphi)_P$ is equal to the stack of the presheaf image at point P. $\ima (\varphi_P) = \{\overline{(U,s)} \in \sG_P \text{ such that } \exists \overline{(V,t)} \in \sF_P | \varphi_P(\overline{(V,t)} = \overline{(U,s)}\}$. But as $\varphi_P(\overline{(V,t)}) = \overline{(V, \varphi(V)(t))}$ then $\overline{(U,s)} \in \ima (\varphi_P) \iff \exists W$ neighbourhood of $P$, $W \subseteq V \cap U$ such that $\varphi(V)(t)|_W = s_W \iff \varphi(W)(t|_W) = s|_W \iff \overline{(U,s)} = \overline(W,\varphi(W)(t|_W)) \iff \overline{(U,s)} \in (\ima \varphi)_P$.

		\item $\varphi$ injective $\imp \ker \varphi = 0 \imp (\ker \phi)_P = 0 \, \forall P$. Using part a) of the problem, $\ker \varphi_P = (\ker \varphi)_P = 0 \imp \varphi_P$ is injective $\forall P$. Reciprocally, let $x \in \ker \varphi(U)$. $\forall P \in U, (\ker \phi)_P = 0$ so the image of $x$ in the stalk $(\ker \phi)_P$ is zero, which means that $\exists W_P \subseteq U$ neighbourhood of $P$ such that $x|_{W_P} = 0$. But open sets $W_P$ cover $U$ and therefore, by property (3) of the definition of shieves, $x = 0$. In conclusion, $\ker \varphi(U) = 0 \, \, \forall U \imp \ker \varphi = 0 \imp \varphi$ injective.

		We proceed similarly with the surjectivity. $\ima \varphi = \sG \imp (\ima \varphi)_P = \sG_P \imp \ima (\varphi_P) = \sG_P \imp \varphi_P$ surjective. To prove the other implication, First we will prove a fact that is stated but not proved in the text: $\sF^{+} \cong \sF$ if $\sF$ is already a sheaf. Given an open set $U$, let $V_P$ be the neighbourhood of $P$ contained in $U$ such that $\exists t \in \sF(V_P)$ such that $t_Q = s(Q) \, \forall Q \in V_P$. The sets $V_P$ cover $U$, and given two of these sets, $V,V'$ and the respective elements $t,t'$ we have that $\overline{(V',t')} = \overline{(V,t)}$ in every stalk $\sF_Q \imp \exists W_Q$ such that $t'|_{W_Q} = t|_{W_Q} \forall Q \in V \cap V'$. Then these $W_Q$ cover $V \cap V'$, and by property (3) applied to $t'|_{V\cap V'}-t_{V\cap V'}$, we have that $t_{V\cap V'} = t'_{V \cap V'}$. Then, by property (4) applied to the sets $V_P$, $\exists t \in \sF(U)$ such that $t_Q = s(Q) \, \, \forall Q \in U$, which means that each application $s$ is uniquely determined by $t \in \sF(U)$, and then $\sF^{+}(U) \cong \sF(U)$. Now it's easy to check that $\varphi$ is surjective. We have that $(\ima \varphi)_P = \ima (\varphi_P) = \sG_P$ and so we have that $\im \varphi (U)$ is the set of functions $s$ from $U$ to $\bigcup_{P \in U} \sG_P$, which means that $\ima \varphi$ is in fact $\sG^{+} \cong \sG$ as $\sG$ is already a sheaf.

		\item Given a sequence of sheaves and morphisms $\dots \xrightarrow[]{} \sF^{i-1} \xrightarrow[]{\varphi^{i-1}} \sF^{i} \xrightarrow[]{\varphi^{i}} \sF^{i+1} \xrightarrow[]{} \dots$, it is exact $\iff \ker \varphi^{i} = \ima \varphi^{i-1}$. If the sequence is exact, taking direct limits at both sides and using section a) we have that $\ker (\varphi^{i}_P) = (\ker \varphi^{i})_P = (\ima \varphi^{i-1})_P = \ima (\varphi^{i-1}_P) $, and so the sequence of stalks at each point $P$ is exact.

		The other implicaton is consequence of a more general result that we will prove now: Two subsheaves are equal $\iff$ the corresponding stalks at each point are equal. Let $\sF_1, \sF_2$ be two subsheaves of $\sF$, such that $(\sF_1)_P = (\sF_2)_P$. Let $t \in \sF_1(U)$. For every $P \in U \exists V_P$ neighbourhood of $P$ and $s \in \sF_2(V)$ such that $s_P = t_P$. The sets $V_P \cap U$ cover $U$, and given two of these sets, $V,V'$ and the respective elements $s,s'$ we have that $\overline{(V',s')} = \overline{(V,s)} = \overline{(U,t)}$ in every stalk $\sF_Q \imp \exists W_Q$ such that $s'|_{W_Q} = s|_{W_Q} \forall Q \in V \cap V'$. Then these $W_Q$ cover $V \cap V'$, and by property (3) applied to $s'|_{V\cap V'}-s|_{V\cap V'}$, we have that $s|_{V\cap V'} = s'|_{V \cap V'}$. Then, by property (4) applied to the sets $V_P \cap U$, $\exists r \in \sF_2(U)$ such that $t_P = r_P \forall P$. By property (3) applied to $r-t$ we get $s = t$ and so $t \in \sF_2(U)$. So $\sF_1(U) \subseteq \sF_2(U)$ and by symmetry $\sF_1(U) = \sF_2(U)$.
	\end{enumerate}
\end{sol}

\begin{ex}
	\begin{enumerate}[label=\alph*)]
		\item Let $\varphi: \sF \to \sG$ be a morphism of sheaves on $X$. Show that $\varphi$ is surjective if and only if the following condition holds: for every open set $U \subseteq X$, and for every $s \in \sG(U)$, there is a covering $\{U_i\}$ of $U$, and there are elements $t_i \in \sF(U_i)$, such that $\varphi(t_i) = s|_{U_i}$, for all i.

		\item Give an example of a surjective morphism of sheaves $\varphi: \sF \to \sG$ and an open set $U$ such that $\varphi(U): \sF(U) \to \sG(U)$ is not injective.
	\end{enumerate}
\end{ex}

\begin{sol}
	\begin{enumerate}[label=\alph*)]
		\item From problem 1.2, $\varphi$ is surjective $\iff$ the induced morphism on every stalk is. Suppose $\varphi_P$ is surjective, then given $U \subseteq X$ open set, $s \in \sG(U)$, $\forall P \in U \exists V$ neighbourhood of $P$ and $t \in \sF(V)$ such that $\overline{(U,s)} = \overline{(V,\varphi(t))} \imp \exists W_P \subseteq U \cap V$ such that $\varphi(t|_{W_P}) = s|_{W_P}$, and so $\{W_P\}$ is the covering that satisfies the desired property. Reciprocally, let $\overline{(U,s)} \in \sG_P$. Then $\forall P \in U \exists i$ such that $P \in U_i \imp \overline{(U,s)} = \overline{(U_i, \varphi(U_i)(t_i))} = \varphi_P(\overline{(U_i, t_i)}) \imp \varphi_P$ is surjective.

		\item An example of this situation is given on Exercise 1.21c) works here. Where there is a surjective morphism $\locO_X \to i_*\locO_P \oplus i_* \locO_Q$, but the map on global sections is not surjective.
	\end{enumerate}
\end{sol}

\begin{ex}
	\begin{enumerate}[label=\alph*)]
		\item Let $\varphi: \sF \to \sG$ be a morphism of presheaves such that $\varphi(U): \sF(U) \to \sG(U)$ is injective foreach $U$. Show that the induced map $\varphi^{+}: \sF^{+} \to \sG^{+}$ of associated sheaves is injective.

		\item Use part (a) to show that if $\varphi: \sF \to \sG$ is a morphism of sheaves, then $\ima \varphi$ can be naturally identified with a subsheaf of $\sG$, as mentioned in the text.
	\end{enumerate}
\end{ex}

\begin{sol}
	\begin{enumerate}[label=\alph*)]
		\item Using 1.2 b) and the fact that $\sF^{+}_P = \sF_P$, the map $\varphi^{+}$ is injective $\iff$ the maps $\varphi_P: \sF_P \to \sG_P$ on the stalks are injective. Let $\overline{(U,s)} \in \sF_P$ such that $\varphi_P(\overline{(U,s)}) = 0 \imp \exists W \subset U$ such that $\varphi(U)(s)|_W = 0 \imp \varphi(W)(s|_W) = 0$. But as $\varphi(U)$ is injective $\forall U$, then $s|_W = 0$ and therefore $\overline{(U,s)} = \overline{(W,s|_W)} = 0$ and thus $\varphi_P$ is injective $\imp \varphi^{+}$ is injective.

		\item Let's consider the presheaf image of a morphism of sheaves $\varphi: \sF \to \sG$, $U \mapsto \ima (\varphi(U))$. Then for each $U$, $\ima (\varphi(U)) \subseteq \sG(U)$, and so the inclusion $i(U): \ima (\varphi(U)) \to \sG(U)$ is an injective morphism of abelian groups $\forall U$. Then, by section a), the induced map $i^{+}: \ima \varphi \to \sG^{+} = \sG$ is injective. 
	\end{enumerate}
\end{sol}

\begin{ex}
	Show that a morphism of sheaves is an isomphism if and only if it is both injective and surjective.
\end{ex}

\begin{sol}
	We know from Proposition $1.1$ that a morphism of sheaves $\varphi$ is an isomorphism $\iff$ the induced morphism on every stalk $\varphi_P$ is an isomorphism. But the induced morphisms on stalks are morphisms of abelian groups, so they're isomorphisms if and only if they're surjective and injective. Now using Exercise 1.2 b) this is equivalent to $\varphi$ being surjective and injective.
\end{sol}

\begin{ex}
	\begin{enumerate}[label=\alph*)]
		\item Let $\sF'$ be a subsheaf of a sheaf $\sF$. Show that the natural map of $\sF$ to the quotient sheaf $\sF / \sF'$ is surjective, and has kernel $\sF'$. Thus there is an exact sequence
		\[
			0 \to \sF' \to \sF \to \sF / \sF' \to 0
		\]

		\item Conversely, if $0 \to \sF' \to \sF \to \sF / \sF' \to 0$ is an exact sequence, show that $\sF'$ is isomorphic to a subsheaf of $\sF$ and that $\sF''$ is isomorphic to the quotient of $\sF$ by this subsheaf.
	\end{enumerate}
\end{ex}

\begin{sol}
	\textbf{Observation:} First we will prove the equivalent of Exercise 1.4 a) for surjectivity. Let $\varphi: \sF \to \sG$ be a morphism of presheaves such that $\varphi(U): \sF(U) \to \sG(U)$ is surjective for each $U$. Then the induced morphisms on stalks are also surjective: Given $\overline{(U,s)} \in \sG_P \exists t \in \sF(U)$ such that $\varphi(U)(t) = s \imp \overline{(U,s)} = \overline{(U, \varphi(U)(t))} = \varphi_P(\overline{(U,t)})$. By Exercise 1.2 b) and the fact that the stalks of the associated shief are equal to the stalks of the preshief ($\sF_P = \sF^{+}_P$), the induced morphism of shieves $\varphi^{+}: \sF^{+} \to \sG^{+}$ is surjective.
	\begin{enumerate}[label=\alph*)]
		\item The morphisms of abelian groups $\sF(U) \to \sF(U)/\sF'(U)$ are surjective $\forall U$. So by the observation above, the morphism of sheaves $\varphi: \sF \to \sF/\sF'$ is surjective. The fact that $\ker \varphi = \sF'$ is a consequence of the result proved in Exercise 1.2c. Indeed, $(\ker \varphi)_P = \ker (\varphi_P)$. As $\varphi_P: \sF_P \to (\sF/\sF')_P = \sF_P/\sF'_P$ are morphisms of abelian groups, their kernel is $\sF'_P$. So $\ker \varphi$ and $\sF'$ are 2 subssheaves of $\sF$ and their stalks at each point $P$ are equal so $\ker \varphi = \sF'$. In conclusion there is an exact sequence $0 \to \sF' \to \sF \to \sF / \sF' \to 0$.

		\item Let's name the applications of the sequence $\varphi, \psi$: $0 \xrightarrow[]{} \sF' \xrightarrow[]{\varphi} \sF \xrightarrow[]{\psi} \sF'' \xrightarrow[]{} 0$. The morphisms of abelian groups $\phi(U): \sF'(U) \xrightarrow[]{\varphi} \ima\varphi(U)$ define a morphism of presheaves. As $\phi(U)$ is surjective $\forall U$, using the observation above we have that $\sF' \to \ima \varphi$ is a surjective morphism of sheaves. Moreover, as $\varphi$ is injective, $\varphi(U): \sF'(U) \to \sF(U)$ is injective $\forall U \imp \phi(U): \sF'(U) \xrightarrow[]{\varphi} \ima \varphi(U)$ is injective $\forall U$, and by Exercise 1.4 a) $\sF' \to \ima \varphi$ is an injective morphism of sheaves. So $\sF' \to \ima \varphi$ is surjective and injective $\imp$ is an isomorphism, and, in conclusion, $\ima \varphi$ is the subsheaf of $\sF$ isomorphic to $\sF'$.

		The surjective morphism of sheaves $\psi: \sF \to \sF''$ induces surjective morphisms of abelian groups on stacks $\psi_P: \sF_P \to \sF''_P$, which induce isomorphisms $\overline{\psi_P}: \sF_P/\ker(\psi_P) \cong \sF''_P \, \, \forall P$ sending the class of an element $s_P$ to its image $\psi_P(s_P)$. 

		In addition, the morphisms of abelian groups $\psi(U): \sF(U) \to \sF''(U)$ also induce the morphism of presheaves $\psi(U): \sF(U)/\ker \psi(U) \to \sF''(U)$. To show that the map os associated sheaves $\sF/\ker \psi \to \sF''$ is an isomorphism, it is enoush to show that the corresponding morphisms on stalks $(\sF/\ker \psi)_P \to \sF''_P$ are isomorphisms. But, taking into account that $(\sF/\ker \psi)_P = \sF_P / (\ker \psi)_P = \sF_P / \ker(\psi_P)$, the corresponding morphisms on stalks are in fact the $\overline{\psi_P}$ and we already know that these are isomorphisms, so in conclusion $\sF/\ker \psi \cong \sF''$. Finally as the sequence $0 \xrightarrow[]{} \sF' \xrightarrow[]{\varphi} \sF \xrightarrow[]{\psi} \sF'' \xrightarrow[]{} 0$ is exact, $\ima \phi = \ker \psi$ and we are done.
	\end{enumerate}
\end{sol}

\begin{ex}
	Let $\varphi: \sF \to \sG$ be a morphism of sheaves.
	\begin{enumerate}[label=\alph*)]
		\item Show that $\ima \varphi \cong \sF/\ker \varphi$.
		\item Show that $\text{coker} \varphi \cong \sG /\ima \varphi$.
	\end{enumerate}
\end{ex}

\begin{sol}
	\begin{enumerate}[label=\alph*)]
		\item Given $\varphi: \sF \to \sG$ the observation on Exercise 1.6 shows that $\sF \to \ima \varphi$ is surjective. Therefore we have an exact sequence $0 \to \ker \varphi \to \sF \to \ima \varphi \to 0$ and by Exercise 1.6 b) $\ima \varphi \cong \sF / \ker \varphi$.

		\item The identity map $\text{coker} \varphi (U) \to \sG(U)/ \ima \varphi(U)$ is surjective and injective (it is in fact the definition of the cokernel), and it defines a morphism of presheaves. Then, by Exercise 1.4a) and Observation on 1.6 the induced map of associated sheaves $\text{coker} \varphi \to \sG/ \ima \varphi$ is surjective and injective, $\imp \text{coker} \varphi \cong \sG/ \ima \varphi$.
	\end{enumerate}
\end{sol}

\begin{ex}
	For any open subset $U \subseteq X$ show that the functor $\Gamma(U,·)$ from sheaves on $X$ to abelian groups is a left exact functor, i.e. if $0 \to \sF' \to \sF \to \sF''$ is an exact sequence of sheaves, then $0 \to \Gamma(U,\sF') \to \Gamma(U, \sF) \to \Gamma(U, \sF'')$ is an exact sequence of groups. The functor $\Gamma(U,·)$ need not be exact; see (Ex. 1.21) below.
\end{ex}

\begin{sol}
	Let's note $\varphi: \sF' \to \sF$ and $\psi: \sF \to \sF''$. To show that the sequence $0 \to \Gamma(U,\sF') \to \Gamma(U, \sF) \to \Gamma(U, \sF'')$ is exact we need to prove: a) That $\varphi(U): \sF'(U) \to \sF(U)$ is injective and b) That $\ker \psi(U) = \ima \varphi(U)$. a) is a consequence of the fact that a morphism of sheaves is injective $\iff$ the induced morphism on every section is injective. Let's proceed to prove b) showing both inclusions. First note that by Exercise 1.2 c) the induced sequence $0 \to \sF'_P \to \sF_P \to \sF''_P$ on stalks is exact, and therefore $\ima (\varphi_P) = \ker (\varphi_P) \, \, \forall P$. 

	Let $y \in \ima \varphi(U) \imp y = \varphi(U)(x)$. Then its image on the stalk $\overline{(U,y)} = \overline{(U, \varphi(U)(x))} = \varphi_P(\overline{(U,x)}) \in \ima (\varphi_P) = \ker (\varphi_P)$. That means that $\exists W_P \subseteq U$ neighbourhood of $P$ such that $\psi(W_P)(y|_{W_P}) = \psi(U)(y)|_{W_P} = 0 \imp y|_{W_P} \in \ker \psi(W_P)$. The sets $\{W_P\}$ are an open covering of $U$, and $(y|_{W_P})|_{W_P \cap W_Q} = (y|_{W_P \cap W_Q}) = (y|_{W_Q})|_{W_P \cap W_Q}$. So as $\ker \psi$ is a sheaf, $\exists y' \in \ker \psi(U)$ such that $y'|_{W_P} = y|_{W_P}$. As $\sF$ is a sheaf, applying property (3) to $y-y'$ we get that $y = y'$ and therefore $y \in \ker \psi(U)$. This proves $\ima \varphi(U) \subseteq \ker \psi(U)$. Reciprocally, let $y \in \ker \psi(U)$. The same argument on the stalks we did before proves that $\overline{(U,y)} \in \ima (\varphi_P) \imp \exists W_P \subseteq U$ and $x_{W_P} \in \sF'(W_P)$ such that $y|_{W_P} = \varphi(W)(x_{W_P})$. As $\varphi(W_P \cap W_Q)$ is injective, and sends $x_{W_P}|_{W_P \cap W_Q}$ and $x_{W_P}|_{W_P \cap W_Q}$ to the same element $y|_{W_P \cap W_Q}$, they must be equal, and therefore $\exists x \in \sF'(U)$ such that $x|_{W_P} = x_{W_P} \, \, \forall P$. By property (3) of sheaf $\sF$ applied to $\varphi(x)-y$ we get that $y = \varphi(x)$ and therefore $\ima \varphi(U) \supseteq \ker \psi(U)$.
\end{sol}

\begin{ex}
	Direct Sum. Let $\sF$ and $\sG$ be sheaves on $X$. Show that the presheaf $U \mapsto \sF(U) \oplus \sG(U)$ is a sheaf. It is called the direct sum of $\sF$ and $\sG$ and is denoted by $\sF \oplus \sG$. Show that it plays the role of direct sum and of direct product in the category of sheaves of abelian groups on X.
\end{ex}

\begin{sol}
	We have defined an abelian group for each open set $U$, but the problem doesn't specify the restriction morphisms. However, they're induced naturally by the restriction morphisms of $\sF$ and $\sG$: $\rho_{UV}^{\sF \oplus \sG} = \rho_{UV}^{\sF} \oplus \rho_{UV}^{\sG}$ that maps $(x,y) \in \sF(U) \oplus \sG(U) \mapsto (\rho_{UV}^{\sF}(x), \rho_{UV}^{\sG}(y))$. Now we can check that this presheaf satisfies (3) and (4) and therefore it is actually a sheaf.
	\begin{itemize}
		\item (3) Let $U$ be an open set, and $\{V_i\}$ be an open covering of $U$. Let $(x,y) \in \sF(U) \oplus \sG(U)$ such that $(0,0) = 0 = (x,y)|_{V_i} = (x|_{V_i}, y_{V_i}) \forall V_i$. This implies that $x|_{V_i} = 0$ and $y|_{V_i} = 0$ and therefore by sheaf property (3) of $\sF$ and $\sG$ we have $x = 0$ and $y = 0 \imp (x,y) = (0,0) = 0$.

		\item (4) Let $U$ be an open set, and $\{V_i\}$ be an open covering of $U$. Let $(x_i, y_i) = s_i \in \sF(V_i) \oplus \sG(V_i)$ such that $s_i|_{V_i \cap V_j} = s_j|_{V_i \cap V_j}$, which means that $(x_i|_{V_i \cap V_j}, y_i|_{V_i \cap V_j}) = (x_i,y_i)|_{V_i \cap V_j} = s_i|_{V_i \cap V_j} = s_j|_{V_i \cap V_j} = (x_j,y_j)|_{V_i \cap V_j} = (x_j|_{V_i \cap V_j}, y_j|_{V_i \cap V_j})$. Then, by property (4) of shieves $\sF$ and $\sG$, $\exists x \in \sF(U), y \in \sG(U)$ such that $x|_{V_i} = x_i$ and $y|_{V_i} = y_i$. Then, $(x,y) = s \in \sF(U) \oplus \sG(U)$ satisfies $s|_{V_i} = s_i$.
	\end{itemize}

	Then the presheaf $U \mapsto \sF(U) \oplus \sG(U)$ is indeed a sheaf. Now let's check that it plays the role of direct sum and direct product in category theory. We will use the notation $\sF_1, \sF_2$ instead of $\sF, \sG$ to simplify.

	\textbf{Direct product:} The object $\sF_1 \oplus \sF_2$ along with two morphisms $\pi_i: \sF_1 \oplus \sF_2 \to \sF_i$ is the direct product if it satisfies that $\forall$ sheaf $\sG$ and sheaf morphisms $f_i: \sG \to \sF_i \exists ! f: \sG \to \sF_1 \oplus \sF_2$ such that $\pi_i \circ f = f_i$. Indeed, let the morphisms $\pi_i$ be given by $\pi_i(U): \sF_1(U) \oplus \sF_2(U) \to \sF_i(U)$ such that $\pi_i(U)((x_1,x_2)) \mapsto x_i$. Then, the morphism $\sG(U) \to \sF_1(U) \oplus \sF_2(U)$ that maps $x \mapsto (f_1(x), f_2(x))$ satisfies the desired property, as $(\pi_i \circ f)(x) = \pi_i(f_1(x), f_2(x)) = f_i(x)$. In addition, suppose that $\exists f'$ morphism satisfying thsi property. Then $f'(U)(x) = (s_1,s_2) \in \sF_1(U) \oplus \sF_2(U)$, and as $\pi_i(U)(s_1,s_2) = f_i(x) \imp f'(U)(x) = (f_1(x),f_2(x)) \imp f' = f$.

	\textbf{Direct sum:} The element $\sF_1 \oplus \sF_2$ is the categorical direct sum of $\sF_1$ and $\sF_2$ if there exist morphisms $i_j: \sF_j \sF_1 \oplus \sF_2$ such that $\forall$ shief $\sG$ and morphisms $f_i \sF_i \to \sG$, $\exists ! f: \sF_1 \oplus \sF_2 \to \sG$ such that $f \circ i_j = f_j$. Indeed, let's define $i_1(U)(x) = (x,0)$ and $i_2(U)(x) = (0,x)$. Then, we define $f(U): \sF_1(U) \oplus \sF_2(U) \to \sG$ such that $f(U)(x,y) = f_1(x) + f_2(y)$. It's clear that $f \circ i_j = f_j$. In addition, suppose that $\exists f'$ satisfying this property. Then, $f'(U)(x,0) = f_1(U)(x)$, $f'(U)(0,y) = f_2(U)(x)$ and therefore $f'(U)(x,y) = f'(U)(x,0) + f'(U)(0,y) = f_1(U)(x) + f_2(U)(y)$, which proves the uniqueness of $f$.
\end{sol}

\begin{ex}
	Direct Limit. Let $\{\sF_i\}$ be a direct system of sheaves and morphisms on $X$. We define the direct limit of the system $\{\sF_i\}$, denoted $\varinjlim \sF_i$ to be the sheaf associated to the presheaf $U \mapsto \varinjlim \sF_i(U)$. Show that this is a direct limit in the category of sheaves on $X$, i.e., that it has the following universal property: given a sheaf $\sG$ and a collection of morphisms $\sF_i \to \sG$ compatible with the maps of the direct syst, there exists a unique map $\varinjlim \sF_i \to \sG$ such that for each i, the original map $\sF_i \to \sG$ is obtained by composing the maps $\sF_i \to \varinjlim \sF_i \sG$.
\end{ex}

\begin{sol}
	Again we have the definition of a presheaf without specifying the restriction morphisms, so we need to figure out which is the natural way to define them. Let $f_{ij}$ denote the morphisms of the direct system, and $\rho^i_{UV}$ the restriction morphisms of each $\sF_i$. Then, by definition of morphisms of sheaves we have the following commutative diagram
	\begin{tikzcd}
		\sF_i(U) \arrow[r, "f_{ij}(U)"] \arrow[d, "\rho^i_{UV}"]
		& \sF_j(U)\arrow[d, "\rho^j_{UV}"] \\
		\sF_i(V)\arrow[r, "f_{ij}(V)"]
		& \sF_j(V)
	\end{tikzcd}

	Every element in $\varinjlim \sF_i(U)$ can be expressed as the equivalence class of an element $s \in \sF_i(U)$ for a certain i. So it seems natural to define $\rho_{UV}: \varinjlim \sF_i(U) \to \varinjlim \sF_i(V)$ mapping $\overline{s} \mapsto \overline{\rho^i_{UV}(s)}$. We only have to check that this application is well defined, i.e., that it doesn't depend on the chosen representative. Let $t \in \sF_i(U), s \in \sF_j(U)$ such that $\overline{t} = \overline{s}$. Then $\exists k$ such that $k \geq i, k \geq j$ and $f_{ik}(U)(t) = f_{jk}(U)(s)$ Then, $f_{ik}(V)(\rho_{UV}^i(t)) = \rho^k_{UV}(f_{ik}(U)(t)) = \rho_{UV}^k(f_{jk}(U)(s)) = f_{ik}(V)(\rho^j_{UV}(s))$, and therefore $\overline{\rho^i_{UV}(t)} = \overline{\rho^j_{UV}(s)}$ and the restriction morphisms (as we defined them) are well defined.

	Let $\varphi_i: \sF_i \to \sG$ morphisms of sheaves compatible with the maps of the direct system. Then, we define the morphism of presheaves $\varphi$ by $\varphi(U): \varinjlim \sF_i(U) \to \sG$ that sends the class of an element $s \in \sF_i$, $\overline{s} \in \varinjlim \sF_i(U) \mapsto \varphi_i(U)(s) \in \sG(U)$. This application is well defined as the morphisms of sheaves $\varphi_i$ are compatible with the morphisms of the direct system. It is clearly unique satisfying the required property (it must send the class of an element s to its image by the initial morphism $\varphi_i$). Then, by proposition 1.2 the induced map $\varphi^{+}: \varinjlim \sF \to \sG$ in unique and satisfies the requirements of the problem.
\end{sol}

\begin{ex}
	Let $\{\sF_i\}$ be a direct system of sheaves on a noetherian topological space $X$. In this case show that the presheaf $U \mapsto \varinjlim \sF_i(U)$ is already a sheaf. In particuar $\Gamma(X, \varinjlim \sF_i) = \varinjlim \Gamma(X,\sF_i)$.
\end{ex}

\begin{sol}
	If $X$ is a Noetherian topological space, then every subspace of $X$ is quasi compact, and, in particular, every open subset is quasi-compact, i.e.,for every $\{V_i\}$ open covering of $U$ we can extract a finite subcovering (Atiyah-Macdonald Exercise 6.6). Then, it is enough to check that properties (3) and (4) that define a sheaf are satisfied for finite coverings $\{V_i\}_{i = 1}^n$ of $U$. We will use the same notation of last problem.
	\begin{itemize}
		\item (3) Let $\overline{s} \in \varinjlim \sF_i(U)$, with $s \in \sF_i(U)$. Suppose that $0 = \overline{s}|_{V_j} = \overline{\rho^i_{UV_j}(s)}$ That means that $\exists k_j \geq i$ such that $f_{i k_j}(V_j)(\rho^i_{UV_j}(s)) = 0$. As restrictions commute with morphisms of the direct system $\rho^{k_j}_{UV_j}(f_{ik_j}(U)(s)) = f_{i k_j}(V_j)(\rho^i_{UV_j}(s)) = 0$. As the covering is finite, we can define $m := \max_j\{k_j\}$ and we have that 
		\[
			\rho^m_{UV_j}(f_{im}(U)(s)) = f_{im}(V_j)(\rho^i_{UV_j}(s)) = f_{k_j m}(V_j)(f_{i k_j}(V_j)(\rho^i_{UV_j}(s)) = 0
		\]
		Now, by shief property (3) applied to $\sF_m$, we have that $f_{im}(U)(s) = 0 \imp \overline{s} = 0$.

		\item (4) Suppose that we have a covering $\{V_i\}$ of a open set $U$, and $\overline{s_i} \in \varinjlim \sF_j(V_i)$, with $s_i \in \sF_{k_i}(V_i)$ such that $\overline{s_i}|_{V_i \cap V_j} = \overline{s_j}|_{V_i \cap V_j}$. Using the definition of restriction morphisms written in Exercise 10, that is equivalent to $\overline{\rho^{k_i}_{V_i V_i \cap V_j}(s_i)} = \overline{\rho^{k_j}_{V_j V_i \cap V_j}(s_j)}$. That implies $\exists l$ such that $l \geq k_i, l \geq k_j$ and $f_{k_i l}(V_i \cap V_j)(\rho^{k_i}_{V_i V_i \cap V_j} (s_i)) =  f_{k_j l}(V_i \cap V_j)(\rho^{k_j}_{V_j V_i \cap V_j} (s_j))$. As morphisms of the direct system and restrictions commute, we have $\rho^l_{V_i V_i \cap V_j}(f_{K_i l}(V_i)(s_i)) = \rho^l_{V_j V_i \cap V_j}(f_{k_j l}(V_j)(s_j))$, which can be rewritten as $f_{k_i l}(V_i)(s_i)|_{V_i \cap V_j} = f_{k_j l}(V_j)(s_j)|_{V_i \cap V_j}$. Then by property (3) of shieves applied to $\sF_l$ $\exists t \in \sF_l(U)$ such that $t|_{V_i} = f_{k_i l}(V_i)(s_i)$. Then, this last equality implies that $\overline{t} \in \varinjlim \sF_j (U)$ satisfies $\overline{t}|_{V_i} = \overline{t|_{V_i}} = \overline{s_i}$.
	\end{itemize}
	Then, as this is already a sheaf $\varinjlim \Gamma(U, \sF_i) = \varinjlim \sF_i(U) = \Gamma(U, \varinjlim \sF_i)$, and the equality is true in particular when we take $U = X$.
\end{sol}

\begin{ex}
	Inverse limit. Let $\{\sF_i\}$ be a direct system of sheaves on $X$. Show that the presheaf $U \mapsto \varprojlim \sF_i (U)$ is a sheaf. It is called the inverse limit of the system $\{\sF_i\}$, and it is denoted by $\varprojlim \sF_i$. Show that it has the universal property of an inverse limit in the category of sheaves.
\end{ex}

\begin{sol}
	$\varprojlim \sF_i (U)$ is the group of coherent sequences over the abelian groups $\sF_i(U)$, that is sequences $(a_n)$ with $a_n \in \sF_n(U)$ and satisfying $\theta_{n+1}(U)(a_{n+1}) = a_n$, where $\theta_i$ are the morphisms of sheaves of the inverse system. (Atiyah-MacDonald, chapter 10). The restriction morphisms of $\varprojlim \sF_i$ are naturally $\rho_{UV}((a_n)) = (\rho^n_{UV}(a_n))$, which are well defined (it is indeed an element of $\varprojlim \sF(V)$) because restrictions commute with morphisms $\theta_i$. As usual, we will check the 2 properties of the sheaf definition.
	\begin{itemize}
		\item (3) Let $(a_n)$ be a coherent sequence. Suppose that $(a_n)|_{V_i} = 0 \, \, \forall i \imp \rho_{UV_i}((a_n)) = 0 \imp \rho^n_{UV_i}(a_n) = 0 \, \, \forall n$ and $\forall i$. Then, by property (3) on each $\sF_n$ it implies that $a_n = 0 \, \, \forall n$ and in conclusion $((a_n)) = 0$.

		\item (4) Let $(a^i_n) \in \varprojlim_j \sF_j(V_i)$ such that $((a^i_n))|_{V_i \cap V_j} =((a^j_n))|_{V_i \cap V_j} \imp \rho^n_{V_i V_i \cap V_j}(a^i_n) = \rho^n_{V_j V_i \cap V_j}(a^j_n) \, \, \forall n$. Now applying property (4) at each $\sF_n$ we have that $\exists a_n \in \sF_n(U)$ such that $a_n|_{V_i} = a^i_n \, \, \forall n \, \, \forall i$. Now the sequence $(a_n)$ is coherent as $\theta_{n+1}(U)(a_{n+1})|_{V_i} = \theta_{n+1}(V_i)(a^i_{n+1}) = a_n^i$ by the coherence of each sequence $(a_n^i)$. Then applying property (3) of $\sF_n$ to the element $\theta_{n+1}(U)(a_{n+1})-a_n$ we get that $\theta_{n+1}(U)(a_{n+1}) = a_n$ and the sequence is therefore coherent. In consequence, we have $\exists (a_n) \in \varprojlim \sF_i (U)$ such that $(a_n)|_{V_i} = (a_n^i)$.
	\end{itemize}

	Now let's check that this sheaf satisfies the universal property of categorical inverse limits. An object $X$ is the categorical inverse limit of objects $X_i$ if there exist morphisms $\varphi_i: X \to X_i$ such that $\forall$ object $Y$ and morphisms $\psi_i: Y \to X_i$ compatible with morphisms of the inverse system $\exists !$ morphism $\psi: Y \to X$ such that $\psi_i = \varphi_i \circ \psi$. In our situation, let's define $\varphi_i: \varprojlim \sF_i \to \sF_i$ such that $\varphi_i(U)((a_n)) = a_i$. Given a sheaf $Y$ and morphisms compatible with the inverse system (that is, $\psi_i: Y \to \sF_i)$ such that $\psi_i = \theta_{i+1} \circ \psi_{i+1}$) we define the morphism of sheaves $\psi$ by $\psi(U): Y \to \varprojlim \sF_i(U)$, $x \mapsto (\psi_i(U)(x))_i$. The morphism is well defined, because the resulting sequence is coherent as the morphisms $\psi_i$ are compatible with the inverse system. It clearly satisfies $\psi_i = \varphi_i \circ \psi$. Moreover, the morphism $\psi$ is unique: Indeed, suppose $\exists \psi'$ satisfying the same properties. Given $x \in Y(U)$, let $(b_n) = \psi'(x)$. Then as $\psi_i = \varphi_i \circ \psi$ we have $b_i = \psi_i(x) \imp \psi' = \psi$. 
\end{sol}

\begin{ex}

\end{ex}

\begin{sol}
	%With the topology defined on $Spé(\sF)$, the sets $\{t_Q\}_{Q \in V}$ (where $V$ is an open set of $X$) are open, as given a map $\overline{s}: U \to Spé(\sF)$, $\overline{s}^{-1}(\{t_Q\}_{Q \in V}) = U \cap V$ if $s = t$
	%Let $s$ be a continuous section of $\pi$, that is $\pi \circ s = id_U$. That implies that $s(P) \in \sF(P)$, so $s$ satisfies condition (1) of the definition of associated sheaf. 
\end{sol}

\begin{ex}
	Support. Let $\sF$ be a sheaf on $X$, and let $s \in \sF(U)$ be a section over an open set $U$. The support of $s$, denoted $\mathrm{Supp} s$ is defined to be $\{P \in U |s_P \neq 0\}$, where $s_P$ denotes the germ of $s$ in the stalk $\sF_P$. Show that $\mathrm{Supp} s$ is a closed subset of $U$. We define the support of $\sF$, $\mathrm{Supp} \sF$ to be $\{P \in X | \sF_P \neq 0\}$. It need not be a closed subset.
\end{ex}

\begin{sol}
	Let $P \in \overline{\mathrm{Supp} s}$, that is, $\forall V \subseteq U$ such that $P \in V$ we have $\mathrm{Supp} s \cap V \neq \varnothing$. Suppose that $P \notin \mathrm{Supp} s$. Then, $\exists V \subseteq U$ such that $s|_V = 0$. Now let $Q \in V \cap \mathrm{Supp} s$. Then $V$ is also a neighbourhood of $Q$ and $s|_V = 0$, which implies that $Q \notin \mathrm{Supp} s$, a contradiction. So we must have $P \in \mathrm{Supp} s$, which means that $\overline{\mathrm{Supp} s} = \mathrm{Supp} s$, and so it is a closed subset. 
\end{sol}

\begin{ex}
	Sheaf Hom. Let $\sF, \sG$ be sheaves of abelian groups on $X$. For any open set $U \subseteq X$, show that the set $\mathrm{Hom}(\sF|_U, \sG|_U)$ of morphisms of the restricted sheaves has a natural structure of abelian group. Show that the presheaf $U \mapsto \mathrm{Hom}(\sF|_U, \sG|_U)$ is a sheaf. It is called the sheaf of local morphisms of $\sF$ into $\sG$, "sheaf hom" for short, and it is denoted $Hom(\sF, \sG)$.
\end{ex}

\begin{sol}
	First let's make some observations about $\sF|_U$. Open sets of the subspace $U$ are just open sets $V \subseteq U$, as $U$ is open. So, in that case the limit $\varinjlim_{W \supseteq V} \sF(W) = \sF(V)$ so in that case the restriction presheaf is $V \mapsto \sF(V)$ and therefore it is already a sheaf, and its restriction morphisms are the same as the ones of $\sF$, but only on open sets $V \subseteq U$. Then, morphisms of sheaves $\varphi: \sF|_U \to \sG|_U$ are just morphisms of abelian groups $\varphi(V): \sF(V) \to \sG(V) \, \, \forall V \subseteq U$, that commute with restriction morphisms. We can define the sum of two morphisms $\varphi + \psi$ such that $(\varphi + \psi)(V)(x) = \varphi(V)(x) + \psi(V)(y)$. The sum is commutative and associative, as $\sG(V)$ are abelian groups. The morphism that sends each element to zero is the neutral element and every morphism has an inverse $-\varphi$ such that $(-\varphi)(V)(x) = -\varphi(V)(x) \, \, \forall V, \forall x$. Moreover, we can define the restrictions of the sheaf Hom naturally as $\rho_{UV}: \mathrm{Hom}(\sF|_U, \sG|_U) \to \mathrm{Hom}(\sF|_V, \sG|_V)$ as $\forall W \subseteq V \subseteq U, \varphi|_V (W) = \varphi(W)$. Now let's check that the two sheaf properties are satisfied. Let $U$ be an open set and$\{V_i\}$ an open covering of $U$.
	\begin{itemize}
		\item (3) Suppose that we have $\varphi \in \mathrm{Hom}(\sF|_{U}, \sG|_U)$, and $\varphi|_{V_i} = 0$, that is, $\varphi(W)(x) = 0$, $\forall W \subseteq V_i, \, \, \forall x \in \sF(W)$. Now let $U' \subseteq U$ and $x \in \sF(U')$. Let's note $V_i' = V_i \cap U'$. Then $\{V_i'\}$ is an open covering of $U'$. Then, $\varphi(U')(x)|_{V_i'} = \varphi(V'_i)(x|_{V_i'}) = 0$, as $V_i' \subseteq V_i$. Therefore, by property (3) of $\sG$, $\varphi(U')(x) = 0$, and this holds $\forall U' \subseteq U, x \in \sF(U')$, so $\varphi = 0$.

		\item (4) Let's suppose that we have $\varphi_i \in \mathrm{Hom}(\sF|_{V_i}, \sG_{V_i})$ such that $\varphi_i|_{V_i \cap V_j} = \varphi_j|_{V_i \cap V_j}$, that is $\phi_i(V)(x) = \phi_j(V)(x), \, \, \forall W \subseteq V_i \cap V_j$. Now, let $W \subseteq U$, and $x \in \sF(W)$. Then, let $V_i' = W \cap V_i$, and $x_i = x|_{V_i'}$. $\{V_i'\}$ is an open covering of $W$ and we have $\varphi_i(V_i')(x_i) = y_i$, and $y_i|_{V_i'\cap V_j'} = y_j|_{V_i' \cap V_j'}$ so we have by property (4) of $\sG$ that $\exists y \in \sG(W)$ such that $y|_{V_i'} = y_i$. Then we define $\varphi(W)(x) = y$. In this way, we have defined an image for every element of $W$, that is, an application $\sF(W) \to \sG(W)$. Now we have to check that this application is a morphism of abelian groups and commutes with restrictions, and we'll be done. It's clear that $\varphi(W)(0) = 0$, by property (3) of $\sG$. Moreover, given $x_1, x_2 \in \sF(W)$ we have $\varphi(W')(x_1|_{V_i'} + x_2|_{V_i'}) = y_{i1} + y_{i2}$. Then, applying property (3) of $\sG$ on $\varphi(W)(x_1+x_2)-y_1-y_2$ we have indeed that $\varphi(W)(x_1+x_2) = y_1 + y_2$. On the other hand, let $W \subseteq V \subseteq U$, and given $x \in \sF(V)$. Let's name $y_{iW} := \varphi_i(V_i \cap W)(x|_{V_i \cap W}), y_{iV} := \varphi_i(V_i \cap V)(x|_{V_i \cap V})$, which induce images $\varphi(W)(x|_W) =: y_W, \varphi(V)(x) =: y_V$ by the construction we have done. As $\varphi_i$ are morphisms of sheaves, $y_V|_{V_i \cap W} = y_{iW}$, and therefore applying once more property (3) on $\sG$ we get $y_V|_{W} = y_W$, so $\varphi(W)(x|_W) = \varphi(V)(x)|_W$. So we have defined morphisms of abelian groups on each open subset of $U$, that commute with restrictions. This defines a morphism of sheaves $\varphi \in \mathrm{Hom}(\sF|_{U}, \sG_{U})$ whose restriction on $V_i$ is $\varphi_i$ and we are done.
	\end{itemize}
\end{sol}

\begin{ex}
	Flasque sheaves. A sheaf $\sF$ on a topological space $X$ is flasque if for every inclusion $V \subseteq U$ of open sets, the restriction map $\sF(U) \to \sF(V)$ is surjective.
	\begin{enumerate}[label=\alph*)]
		\item Show that a constant sheaf on an irreducible topological space is flasque.
		\item If $0 \to \sF' \to \sF \to \sF'' \to 0$ is an exact sequence of sheaves, and if $\sF'$ is flasque, then for any open set $U$ the sequence $0 \to \sF'(U) \to \sF(U) \to \sF''(U) \to 0$ of abelian groups is also exact.
		\item If $0 \to \sF' \to \sF \to \sF'' \to 0$ is an exact sequence of sheaves, and if $\sF'$ and $\sF$ are flasque, then $\sF''$ is flasque.
		\item If $f: X \to Y$ is a continuous map, and if $\sF$ is a flasque sheaf on $X$, then $f_{*}\sF$ is a flasque sheaf on $Y$.
		\item Let $\sF$ be any sheaf on $Y$. We define a new sheaf $\sG$, called the sheaf of discontinuous sections of $\sF$ as follows. For each open set $U \subseteq X, \sG(U)$ is the set of maps $s: U \to \bigcup_{P \in U} \sF_P$ such that for each $P \in U, s(P) \in \sF_P$. Show that $\sG$ is a flasque sheaf, and that there is a natural injective morphism of $\sF$ to $\sG$.
	\end{enumerate}
\end{ex}

\begin{sol}
	\begin{enumerate}[label=\alph*)]
		\item If $X$ is an irreducible topological space, every nonempty set is dense and therefore every nonempty open set is connected $\imp \sF(U) \cong A, \, \, \forall U$. In consequence, $\forall V \subseteq U$ the restriction map $\rho_{UV}$ is the identity map $A \to A$ which is in particular surjective.

		\item Let's name the morphisms of the exact sequence $0 \xrightarrow[]{} \sF' \xrightarrow[]{\psi} \sF \xrightarrow[]{\varphi} \sF'' \xrightarrow[]{} 0$. By Exercise 1.8 we only need to check that $\varphi(U)$ is a surjective morphism of abelian groups $\forall U$. Let's fix $U$. By Exercise 1.3, $\varphi$ surjective $\imp \exists \{U_i\}$ open covering of $U$, and $t_i \in \sF(U_i)$ such that $\varphi(U_i)(t_i) = s|_{U_i}$.
		%Falta la solució d'aquest problema!!!!

		\item If $\sF'$ is flasque, then by section b) of this problem the sequence $0 \to \sF'(U) \to \sF(U) \to \sF''(U) \xrightarrow[]{\varphi(U)} 0$ is exact, and in particular, $\varphi(U)$ is surjective $\forall U$. Then given $V \subseteq U$ and $s \in \sF''(V) \imp \exists t \in \sF(V)$ such that $\varphi(V)(t) = s$. As $\sF$ is flasque, $\exists t' \in \sF(U)$ with $t'|_V = t$. Then, $s':= \varphi(U)(t')$ satisfies $s'|_{V} = \varphi(U)(t')|_V = \varphi(V)(t) = s$. In consequence, the restriction $\sF(U) \to \sF(V)$ is surjective, and that means $\sF''$ is flasque.

		\item Let $V \subseteq U$ be open sets of $Y$. Then $f^{-1}(V) \subseteq f^{-1}(U)$ are open subsets of $X$, and as $\sF$ is flasque, given $y \in (f_{*}\sF)(V) = \sF(f^{-1}(V)) \exists x \in \sF(f^{-1}(U)) = (f_{*}\sF)(U)$ such that $x|_V = y$, and therefore $f_{*}\sF$ is also flasque.

		\item First let's note that the sections $\sG(U)$ defined are indeed abelian groups: The sum of two applications $s,t$ is defined as the application $P \mapsto s(P) + t(P)$. The neutral element is the application that sends each $P$ to the class of 0 in $\sF_P$. The restriction morphisms are well defined, as every applictaion acting on a set $U$ naturally restricts to an application acting on $V \subseteq U$. Let's see that it is a sheaf. We have to check that properties (3) and (4) are satisfied. (3): If Given $s \in \sG(U)$, and $\{U_i\}$ is an open covering of $U$, then$s|_{U_i}(P) = s(P) = 0$ for each $P \in U_i \imp s(P) = 0 \forall P \in U \imp s = 0$. (4): Given $s_i \in \sG(U_i), and s_i|_{U_i \cap U_j} = s_j|_{U_i \cap U_j} $ we can define $s(P) = s_i(P)$ if $P \in U_i$. It is clearly well defined and satisfies $s|_{U_i} = s_i$.
		Moreover that $\sG$ is a flasque sheaf is also easy to check, as given $U \supseteq V$ we can extend any $s \in \sG(V)$ to an $s' \in \sG(U)$, for example defining $s'(P) = 0 \in \sF_P$ for each $P \notin V$ and $s'(P) = s(P)$ if $P \in V$.

		We have a natural morphism from $\sF$ to $\sG$ that sends $\sF(U) \ni x \to s_x \in \sG(U)$ such that $s_x(P) = \overline{x} \in \sF_P$. It is indeed injective, because if we have $x,y \in \sF(U)$ such that $\overline{x} = \overline{y} \in \sF_P$, $\imp \exists W_P \subseteq U | x_{W_P} = y_{W_P}$ and as $W_P$ is an open covering of $U$ so we must have $x = y$.
	\end{enumerate}
\end{sol}

\begin{ex}
	Skyscrapper sheaves. Let $X$ be a topological space, let $P$ be a point and let $A$ be an abelian group. Define a sheaf $i_P(A)$ on X as follows: $I_P(A)(U) = A$ if $P \in U, 0$ otherwise. Verify that the stalk of $i_P(A)$ is $A$ at every point $Q \in \overline{\{P\}}$, and 0 elsewhere, where $\overline{\{P\}}$ denotes the closure of the set consisting of the point $P$. Hence the name "skyscrapper sheaf". Show that this sheaf could also be described as $i_{*}(A)$, where $A$ denotes the constant sheaf $A$ on the closed subspace $\overline{\{P\}}$, and $i: \overline{\{P\}} \to X$ is the inclusion.
\end{ex}

\begin{sol}
	First, let's check that $i_P(A)$ is a sheaf. Given $V \subseteq U$, if $P \in \notin V$ the restriction morphism is zero, and if $P \in V$ the restriction morphism if the identity on the group $A$. It's clear that property (3) and (4) are satisfied if $P \notin U$. So let $U$ be an open set such that $P \in U$ and $\{V_i\}$ be an open covering of $U$. Let $s \in i_P(A)(U) = A$ Then, $P \in V_i$ for a certain $i$ as $\{V_i\}$ is a covering. Then, $i_P(A)(V_i) = A$ and $0 = s|_{V_i} = s$. Now let $s_i \in i_P(A)(V_i)$ such that $s_i|_{V_i \cap V_j} = s_j|_{V_i \cap V_j}$. Then, $\forall P \in V_i, V_j$ we have that $s_i = s_j \in A$. So then there is a unique element $s \in A$ such that $s = s_i \forall i$ such that $P \in V_i$. If $P \notin V_i, s_i = 0 = s|_{V_i}$. In conclusion, $s \in i_P(A)(U)$ satisfies $s|_{V_i} = s_i \forall i$.

	Let $Q \in \overline{\{P\}}$. Then $P \in U \, \, \forall U$ neighbourhood of $Q$, and therefore $i_P(A)(U) = A$. Then given $\overline{(U,s)}, \overline{V,t} \in (i_P(A))_P$, we have that $\forall W$ neighbourhood of $Q$, $W \subseteq U \cap V$, $W$ is also a neighbourhood of $P$, and so $s|_W = s$, $t|_W = t$. In consequence, $\overline{(U,s)} = \overline{V,t} \iff t = s$, so $(i_P(A))_P = A$.	On the other hand, if $Q \notin \overline{\{P\}}$, then $\exists U$ neighbourhood of $Q$ such that $P \notin U$. Then, $\forall \overline{(V,t)} \in (i_P(A))_P$, $i_P(A)(V \cap U) = 0$ and then $t|_{U \cap V} = 0 \imp \overline{(V,t)} = 0$, so $(i_P(A))_P = 0$.

	Now let's check that $i_{*}(A)$ is an equivalent definition of this sheaf. First, let's note that every open set of $\overline{\{P\}}$ contains $P$, and therefore every open set is dense and so $\overline{\{P\}}$ is an irreducible space, so by the proof of Exercise 1.16a) the constant sheaf $A$ is in fact the sheaf $U \mapsto A$, $\forall U$. Then, given any $U$ open set of $X$, we have two options.
	\begin{itemize}
		\item $P \in U$. In that case, $P \in \overline{\{P\}} \cap U = i^{-1}(U)$ and therefore $i_{*}(A)(U) = \sA(i^{-1}(U)) = \sA(\overline{\{P\}} \cap U) = A$

		\item $P \notin U$. In that case $i^{-1}(U) = \overline{\{P\}} \cap U = \varnothing$, and so we have $i_{*}(A)(U) = \sA(i^{-1}(U)) = \sA(\overline{\{P\}} \cap U) = \sA(\varnothing) = 0$.
	\end{itemize}
	In conclusion, for each open set the sections of $i_{*}(A)$ and  $i_P(A)$ are the same, as well as the restriction morphisms ($\rho_{UV} = Id_A$ if $P \in V$ and $\rho_{UV} = 0$ if $P \notin V$. Indeed, both definitions are equal $i_{*}(A) = i_P(A)$.
\end{sol}

\begin{ex}
	Adjoint property of $f^{-1}$. Let $f: X \to Y$ be a continuous map of topological spaces. Show that for any sheaf $\sF$ on $X$ there is a natural map $f^{-1}f_{*}\sF \to \sF$ and for any sheaf $\sG$ on $Y$ there is a natural map $\sG \to f_{*}f^{-1}\sG$. Use these maps to show that there is a natural bijection of sets, for any sheaves $\sF$ on $X$ and $\sG$ on $Y$
	\[
		\mathrm{Hom}_X(f^{-1}\sG, \sF) = \mathrm{Hom}_Y(\sG, f_{*}\sF)
	\]
	Hence we say that $f^{-1}$ is a left adjoint of $f_{*}$ and that $f_{*}$ is a right adjoint of $f^{-1}$.
\end{ex}

\begin{sol}
	Given $f:X \to Y$ continuous and $\sF$ sheaf on $X$, the sheaf $f^{-1}f_{*}\sF$ is the sheaf associated to the presheaf $U \mapsto \varinjlim_{V \supseteq f(U)} \sF(f^{-1}(V))$. The elements of this abelian group are equivalence classes of pairs $(V,x)$ such that $\overline{(V,x)} = \overline{(V',x')} \iff \exists W, \, f(U) \subseteq W \subseteq V \cap V'$ such that $x|_{f^{-1}(W)} = x'|_{f^{-1}(W)}$. Let's observe that $V \supseteq f(U) \imp f^{-1}(V) \supseteq f^{-1}(f(U)) \supseteq U$. Hence we have the natural map $\varinjlim_{V \supseteq f(U)} \sF(f^{-1}(V)) \ni \overline{(V,x)} \mapsto x|_U$. By the observation we have just made, it is well defined, as we can restrict first to $f^{-1}(W)$ and then to $U$ as $f^{-1}(W) \supseteq U$. Then this defines a map $\varphi(U): \varinjlim_{V \supseteq f(U)} \sF(f^{-1}(V)) \to \sF(U)$ for every open set $U$, and this induces then a morphism of presheaves $\epsilon'$. By Proposition 1.2 we have then a unique morphism of sheaves $\epsilon: f^{-1}f_{*}\sF \to \sF$.

	On the other hand, let $\sG$ be a sheaf on $Y$. Then, $f^{-1}\sG$ is the sheaf associated to the presheaf $\varinjlim_{V \supseteq f(U)} \sG(V)$ (let $(f^{-1}\sG)_{pre}$ denote this presheaf). As $\varinjlim_{P \in U} \varinjlim_{V \supseteq f(U)} \sG(V) = \sG_{f(P)}$, the sections of the sheaf $f^{-1}\sG$ are applications $s: U \to \bigcup_{P \in U} \sG_{f(P)}$ satisfying that $\forall P \in U, s(P) \in \sG_{f(P)}$ and $\forall P \in U \exists U' \subseteq U$ and $t \in \varinjlim_{V \supseteq f(U)} \sG(V)$ such that $\forall Q \in U', t_{f(Q)} = s(Q)$. Then, the sections $f_{*}f^{-1}\sG(V)$ are the group of applications $s: f^{-1}(V) \to \bigcup_{P \in f^{-1}(V)} \sG_{f(P)}$ satisfying that $s(P) \in \sG_{f(P)}$ and $\forall P \in f^{-1}(V) \exists U' \subseteq f^{-1}(V)$ and $t \in \varinjlim_{W \supseteq f(f^{-1}(V))} \sG(W)$ such that $\forall Q \in U', t_{f(Q)} = s(Q)$. Then, as $V \supseteq f(f^{-1}(V))$, there is a natural map from $\sG(V) \to f_{*}f^{-1}\sG(V)$ that assigns each element $s \in \sG(V)$ the application $s: f^{-1}(V) \to \bigcup_{P \in f^{-1}(V)} \sG_{f(P)}$ such that $s(P) = \overline{(V,s)}_{f(P)}$. We will name $\nu$ this morphism of sheaves.

	Let $\varphi: f^{-1}\sG \to \sF$ be a morphism of sheaves, such that $\varphi(U)$ maps aplications $s: U \to \bigcup_{P \in U} \sG_{f(P)}$ satisfying properties (1), (2) to elements $\varphi(U)(s) \in \sF(U)$. Let $\varphi' = \varphi \circ \theta$, where $\theta$ is the morphism $f^{-1}\sG_{pre} \to f^{-1}\sG$. $\varphi$ induces a morphism $\varphi_*: f_*f^{-1}\sG \to f_{*}\sF$ that maps applications $s: f^{-1}(V) \to \bigcup_{P \in f^{-1}(V)} \sG_{f(P)}$ satisfying (1) and (2) to elements $\varphi(f^{-1}(V))(s) \in \sF(f^{-1}(V)) = f_* \sF(V)$. Now let $\psi := \varphi_* \circ \nu : \sG \to f_* \sF$, that sends an element $s \in \sG(V)$ to the image of the aplication $s(P) = \overline{(V,s)}|_{f(P)}$. By abuse of notation we will name $s$ both the application in $f_*f^{-1}\sG(V)$ ang the element $s \in \sG(V)$ that induces it. Then we can write $\psi(V)(s) = \varphi(f^{-1}(V))(s)$. Now $\psi$ induces an application $\psi_{-1}: f^{-1}\sG_{pre} \to f^{-1}f_*\sF$, that sends $\overline{(V,t)} \in \varinjlim_{W \supseteq f(U)} \sG(W)$ to the class of the element $(V,\psi(V)(t) = (V, \varphi(f^{-1}(V))(t))$ in $\varinjlim_{W \supseteq f(U)} \sF(f^{-1}(V))$. Finally, $\epsilon \circ \psi_{-1}: f^{-1}\sG_{pre} \to \sF$ sends the class of an element $(V,t)$ to $\varphi(f^{-1}(V))(t)$, and therefore it is an aplication which is equal to $\varphi'$. In conclusion, the application induced by $\epsilon \circ \psi_{-1}$ that maps from $f^{-1}\sG$ to $\sF$ is indeed the application $\varphi$.

	Now let $\psi: \sG \to f_* \sF$, $\psi(V)(x) \in \sF(f^{-1}(V))$. This induces an application between direct limits $\varinjlim_{W \supseteq f(U)} \sG(W) \ni \overline{(V,x)} \mapsto \overline{(V,\psi(V)(x))} \in \varinjlim_{W \supseteq f(U)} \sF(f^{-1}(W))$. That induces an application $\psi_{-1}: f^{-1}\sG \to f^{-1}f_*\sF$. Given an application $s: U \to \bigcup_{P \in U} \sG_{f(P)}$, $s(P) \in \sG_{f(P)}$ and $\exists U'\subseteq U$ such that $s(Q) = \overline{(V,t)}_{f(Q)} \, \, \forall Q \in U'$ for a certain $t \in \varinjlim_{W \supseteq f(U')} \sG(W)$, we have $\phi_{-1}(U)(s): U \to \bigcup_{P \in U} \sF_P$ takes for every $P$ the corresponding neighbourhood $U'$ already defined and makes $s(Q) = \overline{(V, \psi(V)(t))}_{Q} \, \, \forall Q \in U'$. Then we have finally induced an application $\varphi:= \epsilon \circ \psi_{-1}: f^{-1}\sG \to \sF$. Then, we can induce from $\varphi$ an application $\varphi_*: f_*f^{-1}\sG \to f_* \sF$ that sends applications $s: f^{-1}(V) \to \bigcup_{P \in f^{-1}(V)} \sG_{f(P)}$ such that $\forall P \exists V'$ such that $f^{-1}(V')$ is a neighbourhood of $P$ and $s(Q) = \overline{(V'',t)}_{f(Q)}$ for a certain $\overline{(V'',t)} \in \varinjlim_{W \supseteq f(f^{-1}(V'))} \sG(W)$ to $\varphi_*(V)(s): f^{-1}(V) \to \bigcup_{P \in f^{-1}(V)} \sF_P$, $\varphi_*(s)(P) = (\psi(V'')(t)|_f^{-1}(V'))_P$. Finally, $\varphi_* \circ \nu$ sends an element $t \in \sG(V)$ to the application $s: f^{-1}(V) \to \bigcup_{P \in f^{-1}(V)} \sF_P$ such that $s(P) = (\psi(V)(t))_{P}$, which corresponds to the element $\psi(V)(t) \in \sF(f^{-1}(V))$. Therefore, $\varphi_* \circ \nu = \psi$.

	In conclusion, we have shown that given $\psi: \sG \to f_* \sF$ we can induce a unique application $\varphi: f^{-1}\sG \to \sF$ and the other way round. In conclusion, we have a set bijection 
	\[
		\mathrm{Hom}_X(f^{-1}\sG, \sF) = \mathrm{Hom}_Y(\sG, f_{*}\sF)
	\]

\end{sol}

\begin{ex}
	Extending a sheaf by Zero. Let $X$ be a topological space, let $Z$ be a closed subset, let $i: Z \to X$ be the inclusion, let $U = X-Z$ be the complementary open subset, and let $j: U \to X$ be its inclusion.

	\begin{enumerate}[label=\alph*)]
		\item Let $\sF$ be a sheaf on $Z$. Show that the stalk $(i_{*} \sF)_P$ of the direct image sheaf on $X$ is $\sF_P$ if $P \in Z$, 0 if $P \notin Z$. Hence we call $i_{*} \sF$ the sheaf obtained by extending $\sF$ by zero outside $Z$. By abuse of notation we will sometimes write $\sF$ instead of $i_{*}\sF$ and say "consider $\sF$ as a sheaf on $X$" when we mean "consider $i_{*} \sF$."

		\item Now let \sF be a sheaf on $U$. Let $j_{!}(\sF)$ be the sheaf on $X$ associated to the presheaf $V \mapsto \sF(V)$ if $V \subseteq U$, $V \mapsto 0$ otherwise. Show that the stalk $(j_{!}(\sF))_P$ is equal to $\sF_P$ if $P \in U$, 0 if $P \notin U$, and show that $j_{!}\sF$ is the only sheaf on $X$ which has this property, and whose restriction to $U$ is $\sF$. We call $j_{!}\sF$ the sheaf obtained by extending $\sF$ by zero outside $U$.

		\item Now let $\sF$ be a sheaf on $X$. Show that there is an exact sequence of sheaves on $X$,
		\[
			0 \to j_{!}(\sF|_{U}) \to \sF \to i_{*}(\sF|_{Z}) \to 0
		\]
	\end{enumerate}
\end{ex}

\begin{sol}
	\begin{enumerate}[label=\alph*)]
		\item $(i_{*}\sF)_P = \varinjlim_{P \in U} \sF(i^{-1}(U)) = \varinjlim_{P \in U} \sF(U \cap Z)$. If $P \in Z$, $U \cap Z \neq \varnothing, \, \, \forall U$ neighbourhood of $P$. Then, $U \cap Z$ are nonempty open neighbourhoods of $P$ in $Z$, and every neighbourhood of $P$ in $Z$ is of that form, so 
		\[
			(i_{*}\sF)_P = \varinjlim_{P \in U} \sF(U \cap Z) = \varinjlim_{P \in U', \text{ $U'$ open set of $Z$}} U' = \sF_P
		\]

		On the other hand, if $P \notin U$, as $Z$ is closed $\exists V$ neighbourhood of $P$ such that $V \cap Z = \varnothing \imp \sF(i^{-1}(V)) = 0$. Then, $\forall \overline{(U,x)} \in (i_{*}\sF)_P$, we have $\overline{(U,x)} = \overline{(U \cap V, x|_{U\cap V})} = 0$.

		\item If $P \notin U$ then any neighbourhood $V$ of $P$ satisfies $V \not\subseteq U$ so $\sF(V) = 0$ and $\varinjlim_{P \in V} \sF(V) = 0$. If $P \in U$, the elements of $(j_{!}(\sF))_P$ are equivalence classes $\overline{(V,x)}$. If $V \not\subseteq U$, then $\overline{(V,x)} = \overline{(U \cap V, x|_{U\cap V}}$, so every equivalence class of $(j_{!}(\sF))_P$ has a representative $\overline{(V,x)}$ with $V \subseteq U$, so it is the same set as $\sF_P$, and in consequence, $(j_{!}\sF)_P = \sF_P$.

		Suppose that we have another sheaf $\sG$ on $X$ with this property, and whose restriction to $U$ is $\sF$. We will name $\sH$ the presheaf that defines $j_{!}(\sF)$. Then, let's see that we have an isomorphism between $\sG(V)$ and $j_{!}(\sF)(V)$. Given an element $s \in \sG(V)$, it induces an element of $j_{!}(\sF)(V)$, that is, an application $s: V \to \bigcap_{P \in V} \sG_P = \bigcap_{P \in V} \sH_P$, that maps $P \mapsto s_P$. It clearly satisfies $s(P) \in \sH_P$ (Property 1). If $P \in U$, then $\exists t = s|_{V \cap U} \in \sG(U \cap V) = \sF(U \cap V) = \sH(U \cap V)$ such that $\forall Q \in U \cap V, \, t_Q = s_Q = s(Q)$. If $P \notin U$, $s_P = 0$ so $\exists W_P \subseteq V$ such that $s|_{W_P} = 0$. Then, $\exists t = 0 \in \sH(W_P) = 0$ such that $t_Q = s(Q) = 0, \, \, \forall Q \in W_P$. This proves that the application $s$ we have defined also satisfies Property 2, and therefore it is an element of $j_{!}(\sF)(V)$. Reciprocally, let $s \in j_{!}(\sF)(V)$. Remember that while we are working in $U \cap V$ we can use the properties of a sheaf, as $j_{!}(\sF)|_U = \sF$ is a sheaf.  Then, if $P \in U \cap V$ we have that $\exists W_P$ neighbourhood of $P$ such that $\forall Q \in W_P \exists t \in \sH(W_P) = \sF(W_P)$ such that $t_Q = s(Q)$. Suppose that we have two points $P, P' \in U \cap V$ and $Q \in W_P \cap W_{P'}$, $t_1$ and $t_2$ the respective elements. Then, $(t_1)_Q = (t_2)_Q$ so $\exists V_{Q} \subseteq W_P \cap W_{P'}$ where $t_1|_{V_Q} = t_2|_{V_Q}$. Then the sets $\{V_Q\}$ are an open covering of $W_P \cap W_Q$ and therefore by property (3) $t_1|_{W_{P'}} = t_2|_{W_P}$. Now the sets $W_P$ are an open covering of $U \cap V$ and they have $t_P \in \sF(W_P)$ that agree in the intersections. So by property (4) there exists an element $t \in \sF(U \cap V) = \sG(U \cap V)$ such that $s(P) = t_P \, \, \forall P \in U \cap V$. We want to see this property but in $V$ instead of in $U \cap V$. We will define an open neighbourhood for each $P \in V, P \notin U$ in the following way. If it exists an open neighbourhood of $P$ that doesn't meet $U \cap V$, we choose this one. Otherwise, we know that $t_P = 0$ so it must exist $W_P \subseteq U$ (take an arbitrary $W_P$ and intersect it with $U$, the intersection will be non-empty) neighbourhood of $P$ such that $t|_{W_P} = 0$. Then we choose this $W_P$ as an open neighbourhood of $P$. Then, the sets $\{\{W_P\}, U \cap V\}$ are an open cover of $V$, and let $t_P = 0 \in \sG(W_P)$ and $t_{U \cap V} = t$. These elements agree on the intersections by the way we have defined the open cover. So therefore, as $\sG$ is a sheaf there must exist an element $t' \in \sG(V)$ such that $t'|_{W_P} = 0$ and $t'|_{U \cap V} = t$. In conclusion, $t'$ satisfies that $s(P) = t'_{P}$ for every $P \in V$. In conclusion, we have finally proven that $j_{!}(\sF)(V) \cong \sG(V) \, \, \forall V$ so the sheaf $j_{!}(\sF)$ is unique (up to isomorphism).

		\item Let's define an application from the presheaf that defines $j_{!}(\sF|_{U}) \to \sF$ as the inclusion. On the other hand, let's define an application from $\sF(U) \to \sF|_Z (U \cap Z)$ that maps a section $s$ to its image in $\overline{(V,s)} \in \varinjlim_{V \supseteq V \cap Z} \sF(V)$.  Thses aplications induce a sequence on the associated sheaves $0 \to j_{!}(\sF|_{U}) \to \sF \to i_{*}(\sF|_{Z}) \to 0$. We know that a sequence is exact $\iff$ it is exact on the stalks. 

		Then we can have two cases. If $P \in Z$ (that is $\iff P \notin U$), then $(j_{!}(\sF|_U))_P = 0$, and $(i_{*}(\sF|_Z))_P = \sF_P$ and therefore the sequence becomes $0 \to 0 \to \sF_P \to \sF_P \to 0$ which is cleary exact. On the other hand, if $P \in U$ (that is $\iff P \notin Z$), then $(j_{!}(\sF|_U))_P = \sF_P$, and $(i_{*}(\sF|_Z))_P = 0$ and then the exact sequence becomes $0 \to \sF_P \to \sF_P \to 0 \to 0$, which is also exact.

	\end{enumerate}

\end{sol}

\begin{ex}
	Subsheaf with supports. Let $Z$ be a closed subset of $X$, and let $\sF$ be a sheaf on $X$. We define $\Gamma_Z(X, \sF)$ to be the subgroup of $\Gamma(X,\sF)$ consisting of all sections whose support (Ex. 1.14) is contained in $Z$.
	\begin{enumerate}[label=\alph*)]
		\item Show that the presheaf $V \mapsto \Gamma_{Z \cap V}(V, \sF|_V)$ is a sheaf. It is called the subsheaf of $\sF$ with supports in $Z$ and it is denoted by $\sH^{0}_Z(\sF)$.

		\item Let $U = X-Z$ and let $j: U \to X$ be the inclusion. Show that there is an exact sequence of sheaves on $X$
		\[
		 0 \to \sH^{0}_Z(\sF) \to \sF \to j_{*}(\sF|_U)
		\]
		Furthermore, if $\sF$ is flasque, then the map $\sF \to j_{*}(\sF|_U)$ is surjective.
	\end{enumerate}
\end{ex}

\begin{sol}
	\begin{enumerate}[label=\alph*)]
		\item $\Gamma_{Z \cap V} (V,\sF|_V) = \{s \in \sF(V) \text{ such that } s_P = 0 \, \, \forall P \in V, P \notin Z \cap V\}$, and it is a subgroup of $\sF(V)$. The restrictions of this presehaf are naturally the same morphisms of the sheaf $\sF$. We'll see that they're well defined, as given $W \subset V$, and $s \in \Gamma_{Z \cap V} (V,\sF|_V)$ then we have $s|_W \in \sF(W)$ and given $P \in W, P \notin Z \cap W \imp P \in V, P \notin Z \cap V$ so $s_P = 0$ and therefore $(s|_W)_P = 0$, so we have also $s|_W \in \Gamma_{Z \cap W} (W,\sF|_W)$, and so the restriction morphisms are well defined. 

		As usual, to see that the presehaf $V \mapsto \Gamma_{Z \cap V} (V,\sF|_V)$ we have to check the two properties of the definition. Let $\{V_i\}$ be an open cover of $V$. Property (3) is clear, as given $s \in \Gamma_{Z \cap V} (V,\sF|_V) \imp s \in \sF(V)$, so if $s|_{V_i} = 0$ by property (3) of $\sF$ $s = 0$. Now let $s_i \in \Gamma_{Z \cap V_i} (V_i,\sF|_{V_i})$ such that $s_i|_{V_i \cap V_j} = s_j|_{V_i \cap V_j}$. Then $\exists s \in \sF(V)$ such that $s|_{V_i} = s_i$ by property (4) of $\sF$. We only have to check that this $s \in \Gamma_{Z \cap V} (V,\sF|_V)$. Let $P \in V, P \notin Z \cap V$. As the $V_i$ are a covering of $V$, there must exist $i$ such that $P \in V_i$. Then, $s_P = \overline{(V,s)} = \overline(V_i, s_i) = (s_i)_P = 0$, and so $s \in \Gamma_{Z \cap V}(V,\sF|_V)$.

		\item Let's define a sequence $0 \xrightarrow[]{} \sH_Z^0(\sF) \xrightarrow[]{\varphi} \sF \xrightarrow[]{\psi} j_*(\sF|_U) \xrightarrow[]{} 0$ where the applications $\varphi(V): \sH_Z^0(\sF)(V) \to \sF(V)$ are the inclusion (as $\sH_Z^0(\sF)(V)$ is a subgroup of $\sF(V)$), and $\sF(V) \to j_*(\sF|_U)(V)$ is the restriction, as $j_*(\sF|_U)(V) = \sF(U \cap V)$. Let's see that the sequence is exact as a sequence of abelian groups foreach open set $V$ (that implies exactness on the stalks and therefore exactness of the sequence of morphisms of sheaves). It is clear that $\varphi(V)$ is injective, as it is the inclusion. Now given $s \in \ker \psi(V)$, that is $s \in \sF(V)$ such that $s|_{U \cap V} = 0$, we have that $\forall P \in U \cap V$, $U \cap V$ is a neighbourhood of $P$ and therefore $s|_{U \cap V} = 0 \imp s_P = 0$ for every $P \in U \cap V$, that is, the support of $s$ is contained in $Z \cap V$ and therefore $s \in \sH^0_{Z}(\sF)(V) = \ima \varphi(V)$. Reciprocally, if $s \in \sF(V)$ such that $s_P = 0, \, \, \forall P \in U \cap V$, $\exists W_P$ neighbourhood of $P$ such that $s|_{W_P} = 0$. Then $\{W_P\}_{P \in U \cap V}$ are an pen covering of $U \cap V$, and therefore $s|_{U \cap V} = 0$. In conclusion, $\ker \psi(V) = \ima \varphi(V)$ and the sequence is exact. Moreover, if $\sF$ is flasque, every restriction morphism is surjective, and in particular $\psi$ is surjective.
	\end{enumerate}
\end{sol}

\begin{ex}
	Some Examples of Sheaves on Varieties. Let $X$ be a variety over an algebraically closed field $k$, as in Ch. I. Let $\locO_X$ be the sheaf of regular functions on $X$.
	\begin{enumerate}[label = \alph*)]
		\item Let $Y$ be a closed subset of $X$. For each open set $U \subseteq X$, let $\sI_Y(U)$ be the ideal in the ring $\locO_X(U)$ consisting of those regular functions which vanish at all points of $Y \cap U$. Show that the presheaf $U \mapsto \sI_Y(U)$ is a sheaf. It is caled the sheaf of ideals $\sI_Y$ of $Y$, and it is a subsheaf of the sheaf of rings $\locO_X$.

		\item If $Y$ is a subvariety, then the quotient sheaf $\locO_X / \sI_Y$ is isomorphic to $i_*(\locO_Y)$, where $i: Y \to X$ is the inclusion, and $\locO_Y$ is the sheaf of regular functions on $Y$.

		\item Now let $X = \mathbb{P}$ and let $Y$ be the union of two dictinct points $P, Q \in X$. Then there is an exact sequence of sheaves on $X$, where $\sF = i_* \locO_P \oplus i_* \locO_Q$,
		\[
			0 \to \sI \to \locO_X \to \sF \to 0
		\]

		Show however that the induced map on global sections $\Gamma(X, \locO_X) \to \Gamma(X, \sF)$ is not surjective. This shows that the global section functor $\Gamma(X,·)$ is not exact.

		\item Let again $X = \mathbb{P}$ and let $\locO$ be the sheaf of regular functions. Let $\mathcalboondox{K}$ be the constant sheaf on $X$ associated to the function field $K$ of $X$. Show that there is a natural injection $\locO \to \mathcalboondox{K}$. Show that the quotient sheaf $\mathcalboondox{K}/\locO$ is isomorphic to the direct sum of sheaves $\sum_{P \in X}i_P(I_P)$, where $I_P$ is the group $K/\locO_P$ and $i_P(I_P)$ denotes the skyscraper sheaf given by $I_P$ at point $P$.

		\item Finally show that in the case of (d) the sequence 
		\[
			0 \to \Gamma(X, \locO) \to \Gamma(X, \mathcalboondox{K}) \to \Gamma(X, \mathcalboondox{K}/\locO) \to 0
		\]
		is exact.
	\end{enumerate}
\end{ex}

\begin{sol}
	\begin{enumerate}[label = \alph*)]
		\item The restriction morphisms of this presheaf are naturally the same morphisms as in the sheaf of regular functions, that is $\forall V \subseteq U$, and $f \in \sI_Y(U)$, we define the restriction $f|_V$ as the restriction of the domain to the open set $V$: As $f(x) = 0 \, \, \forall x \in Y \cap U$, in particular $f(x) = 0 \, \, \forall x \in V \cap Y$, which means that $f|_V \in \sI_Y(V)$. Now let's check that the presheaf defined is indeed a sheaf. Let $U$ be an open set of $X$ and $\{V_i\}$ be an open covering of $U$. Let $f \in \locO_X(U)$ such that $f|_{V_i} = 0$, which means that $f(x) = 0 \, \, \forall x \in V_i$. But as $\{V_i\}$ cover $U$, then we have $f(x) = 0 \, \, \forall x \in U \imp f = 0$, and property (3) is satisfied. On the other hand, given $f_i \in \sI_Y(V_i)$, such that $f_i|_{V_i \cap V_j} = f_j|_{U_i \cap U_j}$, let's define $f: U \to k$, as $f(x) = f_i(x)$ if $x \in V_i$. This is then a function from $U$ to $k$, and it is well defined, as the image of the points of $V_i \cap V_j$ by $f_i$ is the same of the image by $f_j$. It is a regular function (as regularity is a local property). Moreover, given $x \in U \cap Y$, $x \in U \cap V_i$ for a certain $V_i$, and therefore $f(x) = f_i(x) = 0$. In conclusion, $f \in \sI_Y(U)$ and clearly $f|_{V_i} = f_i$. This proves property (4) and therefore $\sI_Y$ is a sheaf.

		\item If $i: Y \to X$ is the inclusion, then $i_*(\locO_Y)(U) = \locO_Y(U \cap Y)$ is the ring of regular functions from $U \cap Y$ to $k$. Let's define a sequence $0 \to \sI_Y \to \locO_X \to i_*(\locO_Y) \to 0$ by defining a sequence of abelian groups for each open set $U$:
		\[
			0 \xrightarrow{} \sI_Y(U) \xrightarrow{\varphi(U)} \locO_X(U) \xrightarrow{\psi(U)} i_*(\locO_Y)(U) \xrightarrow{} 0
		\] 

		We define $\varphi(U)$ to be the inclusion (remember that $\sI_Y(U)$ is a subgroup of $\locO_X(U)$), so then $\varphi(U)$ is injective. We define $\psi(U)$ to be the domain restriction to $U \cap Y$. Note that if we restrict the domain of a regular function it is still a regular function, and therefore $\psi(U)$ is well defined. It's also clear that $\ker \psi(U) = \ima \varphi(U)$ as both are exactly the elements of $\locO_X$ that vanish at all points of $Y \cap U$.

		Now let's prove that the morphism of sheaves $\psi$ is surjective. Indeed, given any point of $U$, we have either that $P \in Y \cap U$ or $\exists$ an open neighbourhood $W_P' \subseteq U$ such that $W_P' \cap Y = \varnothing$, because $Y$ is closed. Then, given $f$ a regular function on $U \cap Y$, we have that $\forall P \in U \cap Y$ there exists a neighbourhood of $P$, $W_P$ where $f_P = g_P/h_P$, with $g_P,h_P$ polynomials and $h(x) \neq 0, \, \, \forall x \in W_P$. Then $W_P = Y \cap V_P$ for a certain $V_P$ open set of $X$. Then the function $g_P/h_P$ is regular on $V_P$ and $\psi(V_P)(f/g) = f/g \in \locO_Y(Y \cap V_P) = \locO_Y(W_P)$. For the points $P \notin Y \cap U$ we define $f = 0$ on $W_P'$. Then the sets $\{W_P'\} \cup \{V_P\}$ are an open cover of $U$ and so $\psi$ is surjective as it satisfies the characterization of Exercise 1.3a).

		\item First let's observe that here $\locO_P$ denotes $\locO_{P,Y}$, that is, the germs of regular functions of $Y$ near $P$. As $Y = \{P,Q\}$, and the singletons are closed sets of the Zariski topology (if $P = (x_1,y_1)$, then $P = Z(x_1Y-y_1X)$), then in that case (as the number of points of $Y$ is finite) the singletons are also open sets, and therefore two regular functions are equal in $\locO_P$ if and only if their value in $P$ is the same. In consequence, $\locO_P = k$, $\locO_Q = k$. Then, $i_*\locO_P(U) = \locO_P(U \cap Y) = k$ if $P \in U$ or 0 otherwise. Then, let's define a sequence $0 \xrightarrow{}[] \sI_Y \xrightarrow{}[\varphi] \locO_X \xrightarrow{}[\psi] \sF \xrightarrow{}[] 0$ in the following way.
		Let $\varphi(U)$ be the inclusion for each $U$. It is well defined and injective as we know that $\sI_Y(U)$ is a subgroup of $\locO_X(U)$. $\psi(U)$ maps a regular function $f$ to the pair of values $(f(P),f(Q))$ in case both $P$ and $Q$ belong to $U$. If the point $P$ or $Q$ is not in $U$ it maps the corresponding coordinate to zero. It is clear that $\ker \psi(U) = \ima \varphi(U)$ because both sets are the regular functions on $U$ that vanish both at $P$ and $Q$. We can define $\sI_Y(U) = \locO_X(U)$ when $Y \cap U = \varnothing$ and that way we still have $\ker \psi(U) = \ima \varphi(U)$ when both $P,Q \notin U$. Finally, let's see that $\psi$ is surjective. Given any open set $U$, there is an open covering $U_1 = U \ \{P\}$, $U_2 = U \ \{Q\}$, such that $\forall s = (s_1, s_2) \in \sF(U)$, with $s_i \in k$, we can take $s_i \in \locO_X(U_i)$ and we have $\psi(U_i)(s_i) = s|_{U_i}$, as $\psi(U_1)(t_1) = (t_1,0) = s|_{U_1}$ and $\psi(U_2)(t_2) = (0,t_2) = s|_{U_2}$. Then $\psi$ satisfies the charectarization of Exercise 1.3a) and therefore it is surjective.

		However, the map on global sections is not surjective. It is easy to see this if we use the result of Theorem 3.4 of Chapter I, that states that $\locO_X(X) = k$. Therefore, $\ima \psi(X)$ is the set of pairs $\{(t,t)\}, \, t \in k$ which is not equal to the direct sum $k \oplus k$.

		\item For each open set $U$, let $\varphi(U): \locO(U) \to K$ mapping $f \mapsto \overline{(U,f)}$. This application is injective by remark 3.1.1 of Chapter I (if two regular functions are equal in an open set $V \subseteq U$ then they're equal in $U$). Then, by Exercise 1.4a) the induced morphism of sheaves $\varphi: \locO \to \mathcalboondox{K}$ is injective. Now let's define an application $\psi(U): K \to \sum_{P \in X} i_P(I_P)(U)$. We will index each coordinate of $\sum_{P \in X} i_P(I_P)(U)$ with the corresponding point $P$. Then, we define the coordinate of point $P$ to be 0 if $P \notin U$ or $\overline{f} \in K/\locO_P$ if $P \in U$. Then, it's clear that $\ker \psi(U) = \{f \in K \text{ such that } f \in \locO_P \forall P \in U\} = \locO_X(U)= \ima \varphi(U)$. Now we have to check that $\psi$ is surjective. Let $s \in \sum_{P \in X} i_P(I_P) (U)$. Then, the coordinates of all points must be zero except for a finite number of them, let $P_1, \dots, P_n$ be the indices of these coordinates. As points are closed sets in the Zariski topology, then $W_i = X \ \{P_1, \dots, P_{i-1}, P_{i+1}, \dots, P_n \}$ are open sets. Then, $s|_{W_i \cap U}$ is zero in all coordinates except in $P_i$. Now, as the application $K \to K/\locO_{P_i}$ is surjective $\exists f_i \in K$ such that $\psi(W_i \cap U)(f_i) = s|_{U \cap W_i}$. Now $W_i \cap U$ are an open cover of $U$ and therefore the application on the stalks is surjective and in consequence $\psi: \mathcalboondox{K} \to \sum_{P \in X} i_P(I_P)$ is surjective. Finally, we have proven that we have an exact sequence 
		\[
			0 \to \locO \to \mathcalboondox{K} \to \sum{P \in X}i_P(I_P) \to 0
		\]
		And using now exercise 1.6 we have an isomorphism $\mathcalboondox{K}/\locO \cong \sum_{P \in X}i_P(I_P)$.

	\end{enumerate}
\end{sol}

\begin{ex}
	Glueing sheaves. Let $X$ be a topological space, let $\mathfrak{U} = \{U_i\}$ be an open cover of $X$, and suppose we are given for each $i$ a sheaf $\sF_i$ on $U_i$ and for each $i,j$ an isomorphism $\varphi_{ij}: \sF_i|_{U_i \cap U_j} \to \sF_j|_{U_i \cap U_j}$ such that (1) for each $i$, $\varphi_{ii} = id$ and (2) for each $i,j,k$, $\varphi_{ik} = \varphi_{jk} \circ \varphi_{ij}$ on $U_i \cap U_j \cap U_k$. Then there exists a unique sheaf $\sF$ on $X$ togheather with isomorphisms $\psi_i: \sF|_{U_i} \to \sF_i$ such that for each $i,j, \, \psi_j = \varphi_{ij} \circ \psi_i$ on $U_i \cap U_j$. We say loosely that $\sF$ is obtained by glueing the sheaves $\sF_i$ via the isomorphism $\varphi_{ij}$.
\end{ex}

\begin{sol}

\end{sol}



\end{document}