\documentclass[12pt]{article}

\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{enumitem}
\usepackage{empheq}
\usepackage{tikz-cd}

\newcommand{\N}{\ensuremath{\mathbb{N}}}
\newcommand{\Z}{\ensuremath{\mathbb{Z}}}
\newcommand{\R}{\ensuremath{\mathbb{R}}}
\newcommand{\Q}{\ensuremath{\mathbb{Q}}}
\newcommand{\C}{\ensuremath{\mathbb{C}}}
\newcommand{\imp}{\ensuremath{\Rightarrow}}
\newcommand{\ip}{\ensuremath{\mathfrak{p}}}
\newcommand{\iq}{\ensuremath{\mathfrak{q}}}
\newcommand{\im}{\ensuremath{\mathfrak{m}}}
\newcommand{\ia}{\ensuremath{\mathfrak{a}}}
\newcommand{\ib}{\ensuremath{\mathfrak{b}}}
\newcommand{\Spec}{\ensuremath{\text{Spec}}}
\newcommand{\ima}{\ensuremath{\mathrm{im}}}


\newcommand*\closure[1]{\overline{#1}}

\newtheorem{ex}{Exercise}[section]
\theoremstyle{definition}
\newtheorem*{sol}{Solution}

\DeclareFontFamily{U}{BOONDOX-calo}{\skewchar\font=45 }
\DeclareFontShape{U}{BOONDOX-calo}{m}{n}{
  <-> s*[1.00] BOONDOX-r-calo}{}
\DeclareFontShape{U}{BOONDOX-calo}{b}{n}{
  <-> s*[1.00] BOONDOX-b-calo}{}
\DeclareMathAlphabet{\mathcalboondox}{U}{BOONDOX-calo}{m}{n}
\SetMathAlphabet{\mathcalboondox}{bold}{U}{BOONDOX-calo}{b}{n}
\DeclareMathAlphabet{\mathbcalboondox}{U}{BOONDOX-calo}{b}{n}

\newcommand{\sF}{\ensuremath{\mathcalboondox{F}}}
\newcommand{\sG}{\ensuremath{\mathcalboondox{G}}}
\newcommand{\sA}{\ensuremath{\mathcalboondox{A}}}



\begin{document}

\title{Exercises Hartshorne}
\author{Oriol Velasco Falguera}
\maketitle

\section{Sheaves}

\begin{ex}
	Let $A$ be an abelian group, and define the constant presheaf associated to $A$ on the topological space $X$ to be the presheaf $U \mapsto A$ for all $U \neq \varnothing$, with restriction maps the identity. Show that the constant sheaf $\sA$ defined in the text is the sheaf associated to this presheaf.
\end{ex}

\begin{sol}
	Let $sF$ denote the constant presheaf. Let's first see that each stalk $\sF_P$ is a copy of $A$. Indeed, the elements of $\sF_P$ are represented by pairs $\langle U, s \rangle$, with $U$ open neighbourhood of $P$ and $s \in A$. As the restriction maps are the identity, two pairs $\langle U,s \rangle$ and $\langle V, t \rangle$ represent the same element if and only if $s = t$, so $\sF_P = A$.

	Let $s$ be an application from $U$ to $\bigcup_{P \in U} \sF_P$ satisfying properties (1) and (2) from the definition of associated sheaf. By (1), $s(P) \in \sF_P$ is an element of $A$, and therefore $s$ can be regarded as an application from $U$ to $A$ (that we will denote $s'$). In addition, let $B \subseteq A$. For each $P \in s'^{-1}(B), \, \exists V_{P}$ neighbourhood of $P$ such that $s'(V_P) = t \in B$. Then $s'^{-1}(B) = \bigcup_{P \in s'^{-1}(B)} V_P$ which is open. We have proved that the antiimage of every subset is open and therefore $s'$ is continuos with $A$ being given the discrete topology.

	Reciprocally, any countinuous application $s'$ from $U$ to $A$ can be regarded as an application $s$ from $U$ to $\bigcup_{P \in U} \sF_P$, defining $s(P) = s'(P) \in \sF_P$. This assignation guarantees that $s$ satisfies (1). In addition, for each $P \in U$, the set $V = s'^{-1}(s'(P))$ is an open neighbourhood of $P$ (by continuity of s'), and every $Q \in V$ has the same image $s'(P)$, which proves that $s$ satisfies (2).

	In conclusion, $\sF^{+}(U)$ is the group of continuous maps from $U$ into $A$, and therefore $\sF^{+}$ is indeed the sheaf $\sA$ defined in the text.
\end{sol}

\begin{ex}
	\begin{enumerate}[label=\alph*)]
		\item For any morphism of sheaves $\varphi: \sF \to \sG$ show that for each point $P$, $(\ker \varphi)_P = \ker(\varphi_P)$ and $(\ima \varphi)_P = \ima (\varphi_P)$.
		\item Show that $\varphi$ is injective (respectively surjective) if and only if the induced map on the stalks $\varphi_P$ is injective (respectilevy surjective) for all $P$.
		\item Show that a sequence $\dots \xrightarrow[]{} \sF^{i-1} \xrightarrow[]{\varphi^{i-1}} \sF^{i} \xrightarrow[]{\varphi^{i}} \sF^{i+1} \xrightarrow[]{} \dots$ of sheaves and morphisms is exact if and only if for each $P \in X$ the corresponding sequence of stalks is exact as a sequence of abelian groups.
	\end{enumerate}
\end{ex}

\begin{sol}
	\begin{enumerate}[label=\alph*)]
		\item $(\ker \varphi)_P = \{(U,s), \, s \in \ker(\varphi(U))\}$, modulo the usual germ equivalence relationship. Thus it can be regarded as a subset of $\sF_P$ as $\ker(\varphi(U)) \subseteq \sF(U)$. On the other side $\ker(\varphi_P)$ is a subset of $\sF_P$. To see that the two sets are equal it's enough to check the double inclusion. Let $\overline{(U,s)} \in (\ker \varphi)_P$. Then, $\varphi_P(\overline{(U,s)}) = \overline{(U, (\varphi(U))(s))} = \overline{(U,0)} = 0 \imp \overline{(U,s)} \in \ker(\varphi_P)$. Reciprocally, given $\overline{(U,s)} \in \ker(\varphi_P) \imp \exists V \subset U$ such that $\varphi(U)(s)|_V = 0$. As restrictions commute with morphisms of sheaves, $ \varphi(V)(s|_V) = \varphi(U)(s)|_V = 0$. Then, $\overline{(U,s)} = \overline{(V,s|_V)} \in (\ker\varphi)_P$. In conclusion, $(\ker \varphi)_P = \ker(\varphi_P)$.

		As $\sF_P = \sF^{+}_P$, $(\ima \varphi)_P$ is equal to the stack of the presheaf image at point P. $\ima (\varphi_P) = \{\overline{(U,s)} \in \sG_P \text{ such that } \exists \overline{(V,t)} \in \sF_P | \varphi_P(\overline{(V,t)} = \overline{(U,s)}\}$. But as $\varphi_P(\overline{(V,t)}) = \overline{(V, \varphi(V)(t))}$ then $\overline{(U,s)} \in \ima (\varphi_P) \iff \exists W$ neighbourhood of $P$, $W \subseteq V \cap U$ such that $\varphi(V)(t)|_W = s_W \iff \varphi(W)(t|_W) = s|_W \iff \overline{(U,s)} = \overline(W,\varphi(W)(t|_W)) \iff \overline{(U,s)} \in (\ima \varphi)_P$.

		\item $\varphi$ injective $\imp \ker \varphi = 0 \imp (\ker \phi)_P = 0 \, \forall P$. Using part a) of the problem, $\ker \varphi_P = (\ker \varphi)_P = 0 \imp \varphi_P$ is injective $\forall P$. Reciprocally, let $x \in \ker \varphi(U)$. $\forall P \in U, (\ker \phi)_P = 0$ so the image of $x$ in the stalk $(\ker \phi)_P$ is zero, which means that $\exists W_P \subseteq U$ neighbourhood of $P$ such that $x|_{W_P} = 0$. But open sets $W_P$ cover $U$ and therefore, by property (3) of the definition of shieves, $x = 0$. In conclusion, $\ker \varphi(U) = 0 \, \, \forall U \imp \ker \varphi = 0 \imp \varphi$ injective.

		We proceed similarly with the surjectivity. $\ima \varphi = \sG \imp (\ima \varphi)_P = \sG_P \imp \ima (\varphi_P) = \sG_P \imp \varphi_P$ surjective. To prove the other implication, First we will prove a fact that is stated but not proved in the text: $\sF^{+} \cong \sF$ if $\sF$ is already a sheaf. Given an open set $U$, let $V_P$ be the neighbourhood of $P$ contained in $U$ such that $\exists t \in \sF(V_P)$ such that $t_Q = s(Q) \, \forall Q \in V_P$. The sets $V_P$ cover $U$, and given two of these sets, $V,V'$ and the respective elements $t,t'$ we have that $\overline{(V',t')} = \overline{(V,t)}$ in every stalk $\sF_Q \imp \exists W_Q$ such that $t'|_{W_Q} = t|_{W_Q} \forall Q \in V \cap V'$. Then these $W_Q$ cover $V \cap V'$, and by property (3) applied to $t'|_{V\cap V'}-t_{V\cap V'}$, we have that $t_{V\cap V'} = t'_{V \cap V'}$. Then, by property (4) applied to the sets $V_P$, $\exists t \in \sF(U)$ such that $t_Q = s(Q) \, \, \forall Q \in U$, which means that each application $s$ is uniquely determined by $t \in \sF(U)$, and then $\sF^{+}(U) \cong \sF(U)$. Now it's easy to check that $\varphi$ is surjective. We have that $(\ima \varphi)_P = \ima (\varphi_P) = \sG_P$ and so we have that $\im \varphi (U)$ is the set of functions $s$ from $U$ to $\bigcup_{P \in U} \sG_P$, which means that $\ima \varphi$ is in fact $\sG^{+} \cong \sG$ as $\sG$ is already a sheaf.

		\item Given a sequence of sheaves and morphisms $\dots \xrightarrow[]{} \sF^{i-1} \xrightarrow[]{\varphi^{i-1}} \sF^{i} \xrightarrow[]{\varphi^{i}} \sF^{i+1} \xrightarrow[]{} \dots$, it is exact $\iff \ker \varphi^{i} = \ima \varphi^{i-1}$. If the sequence is exact, taking direct limits at both sides and using section a) we have that $\ker (\varphi^{i}_P) = (\ker \varphi^{i})_P = (\ima \varphi^{i-1})_P = \ima (\varphi^{i-1}_P) $, and so the sequence of stalks at each point $P$ is exact.

		The other implicaton is consequence of a more general result that we will prove now: Two subsheaves are equal $\iff$ the corresponding stalks at each point are equal. Let $\sF_1, \sF_2$ be two subsheaves of $\sF$, such that $(\sF_1)_P = (\sF_2)_P$. Let $t \in \sF_1(U)$. For every $P \in U \exists V_P$ neighbourhood of $P$ and $s \in \sF_2(V)$ such that $s_P = t_P$. The sets $V_P \cap U$ cover $U$, and given two of these sets, $V,V'$ and the respective elements $s,s'$ we have that $\overline{(V',s')} = \overline{(V,s)} = \overline{(U,t)}$ in every stalk $\sF_Q \imp \exists W_Q$ such that $s'|_{W_Q} = s|_{W_Q} \forall Q \in V \cap V'$. Then these $W_Q$ cover $V \cap V'$, and by property (3) applied to $s'|_{V\cap V'}-s|_{V\cap V'}$, we have that $s|_{V\cap V'} = s'|_{V \cap V'}$. Then, by property (4) applied to the sets $V_P \cap U$, $\exists r \in \sF_2(U)$ such that $t_P = r_P \forall P$. By property (3) applied to $r-t$ we get $s = t$ and so $t \in \sF_2(U)$. So $\sF_1(U) \subseteq \sF_2(U)$ and by symmetry $\sF_1(U) = \sF_2(U)$.
	\end{enumerate}
\end{sol}

\begin{ex}
	\begin{enumerate}[label=\alph*)]
		\item Let $\varphi: \sF \to \sG$ be a morphism of sheaves on $X$. Show that $\varphi$ is surjective if and only if the following condition holds: for every open set $U \subseteq X$, and for every $s \in \sG(U)$, there is a covering $\{U_i\}$ of $U$, and there are elements $t_i \in \sF(U_i)$, such that $\varphi(t_i) = s|_{U_i}$, for all i.

		\item Give an example of a surjective morphism of sheaves $\varphi: \sF \to \sG$ and an open set $U$ such that $\varphi(U): \sF(U) \to \sG(U)$ is not injective.
	\end{enumerate}
\end{ex}

\begin{sol}
	\begin{enumerate}[label=\alph*)]
		\item From problem 1.2, $\varphi$ is surjective $\iff$ the induced morphism on every stalk is. Suppose $\varphi_P$ is surjective, then given $U \subseteq X$ open set, $s \in \sG(U)$, $\forall P \in U \exists V$ neighbourhood of $P$ and $t \in \sF(V)$ such that $\overline{(U,s)} = \overline{(V,\varphi(t))} \imp \exists W_P \subseteq U \cap V$ such that $\varphi(t|_{W_P}) = s|_{W_P}$, and so $\{W_P\}$ is the covering that satisfies the desired property. Reciprocally, let $\overline{(U,s)} \in \sG_P$. Then $\forall P \in U \exists i$ such that $P \in U_i \imp \overline{(U,s)} = \overline{(U_i, \varphi(U_i)(t_i))} = \varphi_P(\overline{(U_i, t_i)}) \imp \varphi_P$ is surjective.

		\item
	\end{enumerate}
\end{sol}

\begin{ex}
	\begin{enumerate}[label=\alph*)]
		\item Let $\varphi: \sF \to \sG$ be a morphism of presheaves such that $\varphi(U): \sF(U) \to \sG(U)$ is injective foreach $U$. Show that the induced map $\varphi^{+}: \sF^{+} \to \sG^{+}$ of associated sheaves is injective.

		\item Use part (a) to show that if $\varphi: \sF \to \sG$ is a morphism of sheaves, then $\ima \varphi$ can be naturally identified with a subsheaf of $\sG$, as mentioned in the text.
	\end{enumerate}
\end{ex}

\begin{sol}
	\begin{enumerate}[label=\alph*)]
		\item Using 1.2 b) and the fact that $\sF^{+}_P = \sF_P$, the map $\varphi^{+}$ is injective $\iff$ the maps $\varphi_P: \sF_P \to \sG_P$ on the stalks are injective. Let $\overline{(U,s)} \in \sF_P$ such that $\varphi_P(\overline{(U,s)}) = 0 \imp \exists W \subset U$ such that $\varphi(U)(s)|_W = 0 \imp \varphi(W)(s|_W) = 0$. But as $\varphi(U)$ is injective $\forall U$, then $s|_W = 0$ and therefore $\overline{(U,s)} = \overline{(W,s|_W)} = 0$ and thus $\varphi_P$ is injective $\imp \varphi^{+}$ is injective.

		\item Let's consider the presheaf image of a morphism of sheaves $\varphi: \sF \to \sG$, $U \mapsto \ima (\varphi(U))$. Then for each $U$, $\ima (\varphi(U)) \subseteq \sG(U)$, and so the inclusion $i(U): \ima (\varphi(U)) \to \sG(U)$ is an injective morphism of abelian groups $\forall U$. Then, by section a), the induced map $i^{+}: \ima \varphi \to \sG^{+} = \sG$ is injective. 
	\end{enumerate}
\end{sol}

\begin{ex}
	Show that a morphism of sheaves is an isomphism if and only if it is both injective and surjective.
\end{ex}

\begin{sol}
	We know from Proposition $1.1$ that a morphism of sheaves $\varphi$ is an isomorphism $\iff$ the induced morphism on every stalk $\varphi_P$ is an isomorphism. But the induced morphisms on stalks are morphisms of abelian groups, so they're isomorphisms if and only if they're surjective and injective. Now using Exercise 1.2 b) this is equivalent to $\varphi$ being surjective and injective.
\end{sol}

\begin{ex}
	\begin{enumerate}[label=\alph*)]
		\item Let $\sF'$ be a subsheaf of a sheaf $\sF$. Show that the natural map of $\sF$ to the quotient sheaf $\sF / \sF'$ is surjective, and has kernel $\sF'$. Thus there is an exact sequence
		\[
			0 \to \sF' \to \sF \to \sF / \sF' \to 0
		\]

		\item Conversely, if $0 \to \sF' \to \sF \to \sF / \sF' \to 0$ is an exact sequence, show that $\sF'$ is isomorphic to a subsheaf of $\sF$ and that $\sF''$ is isomorphic to the quotient of $\sF$ by this subsheaf.
	\end{enumerate}
\end{ex}

\begin{sol}
	\textbf{Observation:} First we will prove the equivalent of Exercise 1.4 a) for surjectivity. Let $\varphi: \sF \to \sG$ be a morphism of presheaves such that $\varphi(U): \sF(U) \to \sG(U)$ is surjective for each $U$. Then the induced morphisms on stalks are also surjective: Given $\overline{(U,s)} \in \sG_P \exists t \in \sF(U)$ such that $\varphi(U)(t) = s \imp \overline{(U,s)} = \overline{(U, \varphi(U)(t))} = \varphi_P(\overline{(U,t)})$. By Exercise 1.2 b) and the fact that the stalks of the associated shief are equal to the stalks of the preshief ($\sF_P = \sF^{+}_P$), the induced morphism of shieves $\varphi^{+}: \sF^{+} \to \sG^{+}$ is surjective.
	\begin{enumerate}[label=\alph*)]
		\item The morphisms of abelian groups $\sF(U) \to \sF(U)/\sF'(U)$ are surjective $\forall U$. So by the observation above, the morphism of sheaves $\varphi: \sF \to \sF/\sF'$ is surjective. The fact that $\ker \varphi = \sF'$ is a consequence of the result proved in Exercise 1.2c. Indeed, $(\ker \varphi)_P = \ker (\varphi_P)$. As $\varphi_P: \sF_P \to (\sF/\sF')_P = \sF_P/\sF'_P$ are morphisms of abelian groups, their kernel is $\sF'_P$. So $\ker \varphi$ and $\sF'$ are 2 subssheaves of $\sF$ and their stalks at each point $P$ are equal so $\ker \varphi = \sF'$. In conclusion there is an exact sequence $0 \to \sF' \to \sF \to \sF / \sF' \to 0$.

		\item Let's name the applications of the sequence $\varphi, \psi$: $0 \xrightarrow[]{} \sF' \xrightarrow[]{\varphi} \sF \xrightarrow[]{\psi} \sF'' \xrightarrow[]{} 0$. The morphisms of abelian groups $\phi(U): \sF'(U) \xrightarrow[]{\varphi} \ima\varphi(U)$ define a morphism of presheaves. As $\phi(U)$ is surjective $\forall U$, using the observation above we have that $\sF' \to \ima \varphi$ is a surjective morphism of sheaves. Moreover, as $\varphi$ is injective, $\varphi(U): \sF'(U) \to \sF(U)$ is injective $\forall U \imp \phi(U): \sF'(U) \xrightarrow[]{\varphi} \ima \varphi(U)$ is injective $\forall U$, and by Exercise 1.4 a) $\sF' \to \ima \varphi$ is an injective morphism of sheaves. So $\sF' \to \ima \varphi$ is surjective and injective $\imp$ is an isomorphism, and, in conclusion, $\ima \varphi$ is the subsheaf of $\sF$ isomorphic to $\sF'$.

		The surjective morphism of sheaves $\psi: \sF \to \sF''$ induces surjective morphisms of abelian groups on stacks $\psi_P: \sF_P \to \sF''_P$, which induce isomorphisms $\overline{\psi_P}: \sF_P/\ker(\psi_P) \cong \sF''_P \, \, \forall P$ sending the class of an element $s_P$ to its image $\psi_P(s_P)$. 

		In addition, the morphisms of abelian groups $\psi(U): \sF(U) \to \sF''(U)$ also induce the morphism of presheaves $\psi(U): \sF(U)/\ker \psi(U) \to \sF''(U)$. To show that the map os associated sheaves $\sF/\ker \psi \to \sF''$ is an isomorphism, it is enoush to show that the corresponding morphisms on stalks $(\sF/\ker \psi)_P \to \sF''_P$ are isomorphisms. But, taking into account that $(\sF/\ker \psi)_P = \sF_P / (\ker \psi)_P = \sF_P / \ker(\psi_P)$, the corresponding morphisms on stalks are in fact the $\overline{\psi_P}$ and we already know that these are isomorphisms, so in conclusion $\sF/\ker \psi \cong \sF''$. Finally as the sequence $0 \xrightarrow[]{} \sF' \xrightarrow[]{\varphi} \sF \xrightarrow[]{\psi} \sF'' \xrightarrow[]{} 0$ is exact, $\ima \phi = \ker \psi$ and we are done.
	\end{enumerate}
\end{sol}

\begin{ex}
	Let $\varphi: \sF \to \sG$ be a morphism of sheaves.
	\begin{enumerate}[label=\alph*)]
		\item Show that $\ima \varphi \cong \sF/\ker \varphi$.
		\item Show that $\text{coker} \varphi \cong \sG /\ima \varphi$.
	\end{enumerate}
\end{ex}

\begin{sol}
	\begin{enumerate}[label=\alph*)]
		\item Given $\varphi: \sF \to \sG$ the observation on Exercise 1.6 shows that $\sF \to \ima \varphi$ is surjective. Therefore we have an exact sequence $0 \to \ker \varphi \to \sF \to \ima \varphi \to 0$ and by Exercise 1.6 b) $\ima \varphi \cong \sF / \ker \varphi$.

		\item The identity map $\text{coker} \varphi (U) \to \sG(U)/ \ima \varphi(U)$ is surjective and injective (it is in fact the definition of the cokernel), and it defines a morphism of presheaves. Then, by Exercise 1.4a) and Observation on 1.6 the induced map of associated sheaves $\text{coker} \varphi \to \sG/ \ima \varphi$ is surjective and injective, $\imp \text{coker} \varphi \cong \sG/ \ima \varphi$.
	\end{enumerate}
\end{sol}

\begin{ex}
	For any open subset $U \subseteq X$ show that the functor $\Gamma(U,·)$ from sheaves on $X$ to abelian groups is a left exact functor, i.e. if $0 \to \sF' \to \sF \to \sF''$ is an exact sequence of sheaves, then $0 \to \Gamma(U,\sF') \to \Gamma(U, \sF) \to \Gamma(U, \sF'')$ is an exact sequence of groups. The functor $\Gamma(U,·)$ need not be exact; see (Ex. 1.21) below.
\end{ex}

\begin{sol}
	Let's note $\varphi: \sF' \to \sF$ and $\psi: \sF \to \sF''$. To show that the sequence $0 \to \Gamma(U,\sF') \to \Gamma(U, \sF) \to \Gamma(U, \sF'')$ is exact we need to prove: a) That $\varphi(U): \sF'(U) \to \sF(U)$ is injective and b) That $\ker \psi(U) = \ima \varphi(U)$. a) is a consequence of the fact that a morphism of sheaves is injective $\iff$ the induced morphism on every section is injective. Let's proceed to prove b) showing both inclusions. First note that by Exercise 1.2 c) the induced sequence $0 \to \sF'_P \to \sF_P \to \sF''_P$ on stalks is exact, and therefore $\ima (\varphi_P) = \ker (\varphi_P) \, \, \forall P$. 

	Let $y \in \ima \varphi(U) \imp y = \varphi(U)(x)$. Then its image on the stalk $\overline{(U,y)} = \overline{(U, \varphi(U)(x))} = \varphi_P(\overline{(U,x)}) \in \ima (\varphi_P) = \ker (\varphi_P)$. That means that $\exists W_P \subseteq U$ neighbourhood of $P$ such that $\psi(W_P)(y|_{W_P}) = \psi(U)(y)|_{W_P} = 0 \imp y|_{W_P} \in \ker \psi(W_P)$. The sets $\{W_P\}$ are an open covering of $U$, and $(y|_{W_P})|_{W_P \cap W_Q} = (y|_{W_P \cap W_Q}) = (y|_{W_Q})|_{W_P \cap W_Q}$. So as $\ker \psi$ is a sheaf, $\exists y' \in \ker \psi(U)$ such that $y'|_{W_P} = y|_{W_P}$. As $\sF$ is a sheaf, applying property (3) to $y-y'$ we get that $y = y'$ and therefore $y \in \ker \psi(U)$. This proves $\ima \varphi(U) \subseteq \ker \psi(U)$. Reciprocally, let $y \in \ker \psi(U)$. The same argument on the stalks we did before proves that $\overline{(U,y)} \in \ima (\varphi_P) \imp \exists W_P \subseteq U$ and $x_{W_P} \in \sF'(W_P)$ such that $y|_{W_P} = \varphi(W)(x_{W_P})$. As $\varphi(W_P \cap W_Q)$ is injective, and sends $x_{W_P}|_{W_P \cap W_Q}$ and $x_{W_P}|_{W_P \cap W_Q}$ to the same element $y|_{W_P \cap W_Q}$, they must be equal, and therefore $\exists x \in \sF'(U)$ such that $x|_{W_P} = x_{W_P} \, \, \forall P$. By property (3) of sheaf $\sF$ applied to $\varphi(x)-y$ we get that $y = \varphi(x)$ and therefore $\ima \varphi(U) \supseteq \ker \psi(U)$.
\end{sol}

\begin{ex}
	Direct Sum. Let $\sF$ and $\sG$ be sheaves on $X$. Show that the presheaf $U \mapsto \sF(U) \oplus \sG(U)$ is a sheaf. It is called the direct sum of $\sF$ and $\sG$ and is denoted by $\sF \oplus \sG$. Show that it plays the role of direct sum and of direct product in the category of sheaves of abelian groups on X.
\end{ex}

\begin{sol}
	We have defined an abelian group for each open set $U$, but the problem doesn't specify the restriction morphisms. However, they're induced naturally by the restriction morphisms of $\sF$ and $\sG$: $\rho_{UV}^{\sF \oplus \sG} = \rho_{UV}^{\sF} \oplus \rho_{UV}^{\sG}$ that maps $(x,y) \in \sF(U) \oplus \sG(U) \mapsto (\rho_{UV}^{\sF}(x), \rho_{UV}^{\sG}(y))$. Now we can check that this presheaf satisfies (3) and (4) and therefore it is actually a sheaf.
	\begin{itemize}
		\item (3) Let $U$ be an open set, and $\{V_i\}$ be an open covering of $U$. Let $(x,y) \in \sF(U) \oplus \sG(U)$ such that $(0,0) = 0 = (x,y)|_{V_i} = (x|_{V_i}, y_{V_i}) \forall V_i$. This implies that $x|_{V_i} = 0$ and $y|_{V_i} = 0$ and therefore by sheaf property (3) of $\sF$ and $\sG$ we have $x = 0$ and $y = 0 \imp (x,y) = (0,0) = 0$.

		\item (4) Let $U$ be an open set, and $\{V_i\}$ be an open covering of $U$. Let $(x_i, y_i) = s_i \in \sF(V_i) \oplus \sG(V_i)$ such that $s_i|_{V_i \cap V_j} = s_j|_{V_i \cap V_j}$, which means that $(x_i|_{V_i \cap V_j}, y_i|_{V_i \cap V_j}) = (x_i,y_i)|_{V_i \cap V_j} = s_i|_{V_i \cap V_j} = s_j|_{V_i \cap V_j} = (x_j,y_j)|_{V_i \cap V_j} = (x_j|_{V_i \cap V_j}, y_j|_{V_i \cap V_j})$. Then, by property (4) of shieves $\sF$ and $\sG$, $\exists x \in \sF(U), y \in \sG(U)$ such that $x|_{V_i} = x_i$ and $y|_{V_i} = y_i$. Then, $(x,y) = s \in \sF(U) \oplus \sG(U)$ satisfies $s|_{V_i} = s_i$.
	\end{itemize}

	Then the presheaf $U \mapsto \sF(U) \oplus \sG(U)$ is indeed a sheaf. Now let's check that it plays the role of direct sum and direct product in category theory. We will use the notation $\sF_1, \sF_2$ instead of $\sF, \sG$ to simplify.

	\textbf{Direct product:} The object $\sF_1 \oplus \sF_2$ along with two morphisms $\pi_i: \sF_1 \oplus \sF_2 \to \sF_i$ is the direct product if it satisfies that $\forall$ sheaf $\sG$ and sheaf morphisms $f_i: \sG \to \sF_i \exists ! f: \sG \to \sF_1 \oplus \sF_2$ such that $\pi_i \circ f = f_i$. Indeed, let the morphisms $\pi_i$ be given by $\pi_i(U): \sF_1(U) \oplus \sF_2(U) \to \sF_i(U)$ such that $\pi_i(U)((x_1,x_2)) \mapsto x_i$. Then, the morphism $\sG(U) \to \sF_1(U) \oplus \sF_2(U)$ that maps $x \mapsto (f_1(x), f_2(x))$ satisfies the desired property, as $(\pi_i \circ f)(x) = \pi_i(f_1(x), f_2(x)) = f_i(x)$. In addition, suppose that $\exists f'$ morphism satisfying thsi property. Then $f'(U)(x) = (s_1,s_2) \in \sF_1(U) \oplus \sF_2(U)$, and as $\pi_i(U)(s_1,s_2) = f_i(x) \imp f'(U)(x) = (f_1(x),f_2(x)) \imp f' = f$.

	\textbf{Direct sum:} The element $\sF_1 \oplus \sF_2$ is the categorical direct sum of $\sF_1$ and $\sF_2$ if there exist morphisms $i_j: \sF_j \sF_1 \oplus \sF_2$ such that $\forall$ shief $\sG$ and morphisms $f_i \sF_i \to \sG$, $\exists ! f: \sF_1 \oplus \sF_2 \to \sG$ such that $f \circ i_j = f_j$. Indeed, let's define $i_1(U)(x) = (x,0)$ and $i_2(U)(x) = (0,x)$. Then, we define $f(U): \sF_1(U) \oplus \sF_2(U) \to \sG$ such that $f(U)(x,y) = f_1(x) + f_2(y)$. It's clear that $f \circ i_j = f_j$. In addition, suppose that $\exists f'$ satisfying this property. Then, $f'(U)(x,0) = f_1(U)(x)$, $f'(U)(0,y) = f_2(U)(x)$ and therefore $f'(U)(x,y) = f'(U)(x,0) + f'(U)(0,y) = f_1(U)(x) + f_2(U)(y)$, which proves the uniqueness of $f$.
\end{sol}

\begin{ex}
	Direct Limit. Let $\{\sF_i\}$ be a direct system of sheaves and morphisms on $X$. We define the direct limit of the system $\{\sF_i\}$, denoted $\varinjlim \sF_i$ to be the sheaf associated to the presheaf $U \mapsto \varinjlim \sF_i(U)$. Show that this is a direct limit in the category of sheaves on $X$, i.e., that it has the following universal property: given a sheaf $\sG$ and a collection of morphisms $\sF_i \to \sG$ compatible with the maps of the direct syst, there exists a unique map $\varinjlim \sF_i \to \sG$ such that for each i, the original map $\sF_i \to \sG$ is obtained by composing the maps $\sF_i \to \varinjlim \sF_i \sG$.
\end{ex}

\begin{sol}
	Again we have the definition of a presheaf without specifying the restriction morphisms, so we need to figure out which is the natural way to define them. Let $f_{ij}$ denote the morphisms of the direct system, and $\rho^i_{UV}$ the restriction morphisms of each $\sF_i$. Then, by definition of morphisms of sheaves we have the following commutative diagram
	\begin{tikzcd}
		\sF_i(U) \arrow[r, "f_{ij}(U)"] \arrow[d, "\rho^i_{UV}"]
		& \sF_j(U)\arrow[d, "\rho^j_{UV}"] \\
		\sF_i(V)\arrow[r, "f_{ij}(V)"]
		& \sF_j(V)
	\end{tikzcd}

	Every element in $\varinjlim \sF_i(U)$ can be expressed as the equivalence class of an element $s \in \sF_i(U)$ for a certain i. So it seems natural to define $\rho_{UV}: \varinjlim \sF_i(U) \to \varinjlim \sF_i(V)$ mapping $\overline{s} \mapsto \overline{\rho^i_{UV}(s)}$. We only have to check that this application is well defined, i.e., that it doesn't depend on the chosen representative. Let $t \in \sF_i(U), s \in \sF_j(U)$ such that $\overline{t} = \overline{s}$. Then $\exists k$ such that $k \geq i, k \geq j$ and $f_{ik}(U)(t) = f_{jk}(U)(s)$ Then, $f_{ik}(V)(\rho_{UV}^i(t)) = \rho^k_{UV}(f_{ik}(U)(t)) = \rho_{UV}^k(f_{jk}(U)(s)) = f_{ik}(V)(\rho^j_{UV}(s))$, and therefore $\overline{\rho^i_{UV}(t)} = \overline{\rho^j_{UV}(s)}$ and the restriction morphisms (as we defined them) are well defined.

	Let $\varphi_i: \sF_i \to \sG$ morphisms of sheaves compatible with the maps of the direct system. Then, we define the morphism of presheaves $\varphi$ by $\varphi(U): \varinjlim \sF_i(U) \to \sG$ that sends the class of an element $s \in \sF_i$, $\overline{s} \in \varinjlim \sF_i(U) \mapsto \varphi_i(U)(s) \in \sG(U)$. This application is well defined as the morphisms of sheaves $\varphi_i$ are compatible with the morphisms of the direct system. It is clearly unique satisfying the required property (it must send the class of an element s to its image by the initial morphism $\varphi_i$). Then, by proposition 1.2 the induced map $\varphi^{+}: \varinjlim \sF \to \sG$ in unique and satisfies the requirements of the problem.
\end{sol}

\begin{ex}
	Let $\{\sF_i\}$ be a direct system of sheaves on a noetherian topological space $X$. In this case show that the presheaf $U \mapsto \varinjlim \sF_i(U)$ is already a sheaf. In particuar $\Gamma(X, \varinjlim \sF_i) = \varinjlim \Gamma(X,\sF_i)$.
\end{ex}

\begin{sol}
	If $X$ is a Noetherian topological space, then every subspace of $X$ is quasi compact, and, in particular, every open subset is quasi-compact, i.e.,for every $\{V_i\}$ open covering of $U$ we can extract a finite subcovering (Atiyah-Macdonald Exercise 6.6). Then, it is enough to check that properties (3) and (4) that define a sheaf are satisfied for finite coverings $\{V_i\}_{i = 1}^n$ of $U$. We will use the same notation of last problem.
	\begin{itemize}
		\item (3) Let $\overline{s} \in \varinjlim \sF_i(U)$, with $s \in \sF_i(U)$. Suppose that $0 = \overline{s}|_{V_j} = \overline{\rho^i_{UV_j}(s)}$ That means that $\exists k_j \geq i$ such that $f_{i k_j}(V_j)(\rho^i_{UV_j}(s)) = 0$. As restrictions commute with morphisms of the direct system $\rho^{k_j}_{UV_j}(f_{ik_j}(U)(s)) = f_{i k_j}(V_j)(\rho^i_{UV_j}(s)) = 0$. As the covering is finite, we can define $m := \max_j\{k_j\}$ and we have that 
		\[
			\rho^m_{UV_j}(f_{im}(U)(s)) = f_{im}(V_j)(\rho^i_{UV_j}(s)) = f_{k_j m}(V_j)(f_{i k_j}(V_j)(\rho^i_{UV_j}(s)) = 0
		\]
		Now, by shief property (3) applied to $\sF_m$, we have that $f_{im}(U)(s) = 0 \imp \overline{s} = 0$.

		\item (4) Suppose that we have a covering $\{V_i\}$ of a open set $U$, and $\overline{s_i} \in \varinjlim \sF_j(V_i)$, with $s_i \in \sF_{k_i}(V_i)$ such that $\overline{s_i}|_{V_i \cap V_j} = \overline{s_j}|_{V_i \cap V_j}$. Using the definition of restriction morphisms written in Exercise 10, that is equivalent to $\overline{\rho^{k_i}_{V_i V_i \cap V_j}(s_i)} = \overline{\rho^{k_j}_{V_j V_i \cap V_j}(s_j)}$. That implies $\exists l$ such that $l \geq k_i, l \geq k_j$ and $f_{k_i l}(V_i \cap V_j)(\rho^{k_i}_{V_i V_i \cap V_j} (s_i)) =  f_{k_j l}(V_i \cap V_j)(\rho^{k_j}_{V_j V_i \cap V_j} (s_j))$. As morphisms of the direct system and restrictions commute, we have $\rho^l_{V_i V_i \cap V_j}(f_{K_i l}(V_i)(s_i)) = \rho^l_{V_j V_i \cap V_j}(f_{k_j l}(V_j)(s_j))$, which can be rewritten as $f_{k_i l}(V_i)(s_i)|_{V_i \cap V_j} = f_{k_j l}(V_j)(s_j)|_{V_i \cap V_j}$. Then by property (3) of shieves applied to $\sF_l$ $\exists t \in \sF_l(U)$ such that $t|_{V_i} = f_{k_i l}(V_i)(s_i)$. Then, this last equality implies that $\overline{t} \in \varinjlim \sF_j (U)$ satisfies $\overline{t}|_{V_i} = \overline{t|_{V_i}} = \overline{s_i}$.
	\end{itemize}
	Then, as this is already a sheaf $\varinjlim \Gamma(U, \sF_i) = \varinjlim \sF_i(U) = \Gamma(U, \varinjlim \sF_i)$, and the equality is true in particular when we take $U = X$.
\end{sol}

\begin{ex}
	Inverse limit. Let $\{\sF_i\}$ be a direct system of sheaves on $X$. Show that the presheaf $U \mapsto \varprojlim \sF_i (U)$ is a sheaf. It is called the inverse limit of the system $\{\sF_i\}$, and it is denoted by $\varprojlim \sF_i$. Show that it has the universal property of an inverse limit in the category of sheaves.
\end{ex}

\begin{sol}
	$\varprojlim \sF_i (U)$ is the group of coherent sequences over the abelian groups $\sF_i(U)$, that is sequences $(a_n)$ with $a_n \in \sF_n(U)$ and satisfying $\theta_{n+1}(U)(a_{n+1}) = a_n$, where $\theta_i$ are the morphisms of sheaves of the inverse system. (Atiyah-MacDonald, chapter 10). The restriction morphisms of $\varprojlim \sF_i$ are naturally $\rho_{UV}((a_n)) = (\rho^n_{UV}(a_n))$, which are well defined (it is indeed an element of $\varprojlim \sF(V)$) because restrictions commute with morphisms $\theta_i$. As usual, we will check the 2 properties of the sheaf definition.
	\begin{itemize}
		\item (3) Let $(a_n)$ be a coherent sequence. Suppose that $(a_n)|_{V_i} = 0 \, \, \forall i \imp \rho_{UV_i}((a_n)) = 0 \imp \rho^n_{UV_i}(a_n) = 0 \, \, \forall n$ and $\forall i$. Then, by property (3) on each $\sF_n$ it implies that $a_n = 0 \, \, \forall n$ and in conclusion $((a_n)) = 0$.

		\item (4) Let $(a^i_n) \in \varprojlim_j \sF_j(V_i)$ such that $((a^i_n))|_{V_i \cap V_j} =((a^j_n))|_{V_i \cap V_j} \imp \rho^n_{V_i V_i \cap V_j}(a^i_n) = \rho^n_{V_j V_i \cap V_j}(a^j_n) \, \, \forall n$. Now applying property (4) at each $\sF_n$ we have that $\exists a_n \in \sF_n(U)$ such that $a_n|_{V_i} = a^i_n \, \, \forall n \, \, \forall i$. Now the sequence $(a_n)$ is coherent as $\theta_{n+1}(U)(a_{n+1})|_{V_i} = \theta_{n+1}(V_i)(a^i_{n+1}) = a_n^i$ by the coherence of each sequence $(a_n^i)$. Then applying property (3) of $\sF_n$ to the element $\theta_{n+1}(U)(a_{n+1})-a_n$ we get that $\theta_{n+1}(U)(a_{n+1}) = a_n$ and the sequence is therefore coherent. In consequence, we have $\exists (a_n) \in \varprojlim \sF_i (U)$ such that $(a_n)|_{V_i} = (a_n^i)$.
	\end{itemize}

	Now let's check that this sheaf satisfies the universal property of categorical inverse limits. An object $X$ is the categorical inverse limit of objects $X_i$ if there exist morphisms $\varphi_i: X \to X_i$ such that $\forall$ object $Y$ and morphisms $\psi_i: Y \to X_i$ compatible with morphisms of the inverse system $\exists !$ morphism $\psi: Y \to X$ such that $\psi_i = \varphi_i \circ \psi$. In our situation, let's define $\varphi_i: \varprojlim \sF_i \to \sF_i$ such that $\varphi_i(U)((a_n)) = a_i$. Given a sheaf $Y$ and morphisms compatible with the inverse system (that is, $\psi_i: Y \to \sF_i)$ such that $\psi_i = \theta_{i+1} \circ \psi_{i+1}$) we define the morphism of sheaves $\psi$ by $\psi(U): Y \to \varprojlim \sF_i(U)$, $x \mapsto (\psi_i(U)(x))_i$. The morphism is well defined, because the resulting sequence is coherent as the morphisms $\psi_i$ are compatible with the inverse system. It clearly satisfies $\psi_i = \varphi_i \circ \psi$. Moreover, the morphism $\psi$ is unique: Indeed, suppose $\exists \psi'$ satisfying the same properties. Given $x \in Y(U)$, let $(b_n) = \psi'(x)$. Then as $\psi_i = \varphi_i \circ \psi$ we have $b_i = \psi_i(x) \imp \psi' = \psi$. 
\end{sol}

\begin{ex}

\end{ex}

\begin{sol}

\end{sol}

\begin{ex}
	Support. Let $\sF$ be a sheaf on $X$, and let $s \in \sF(U)$ be a section over an open set $U$. The support of $s$, denoted $\mathrm{Supp} s$ is defined to be $\{P \in U |s_P \neq 0\}$, where $s_P$ denotes the germ of $s$ in the stalk $\sF_P$. Show that $\mathrm{Supp} s$ is a closed subset of $U$. We define the support of $\sF$, $\mathrm{Supp} \sF$ to be $\{P \in X | \sF_P \neq 0\}$. It need not be a closed subset.
\end{ex}

\begin{sol}
	Let $P \in \overline{\mathrm{Supp} s}$, that is, $\forall V \subseteq U$ such that $P \in V$ we have $\mathrm{Supp} s \cap V \neq \varnothing$. Suppose that $P \notin \mathrm{Supp} s$. Then, $\exists V \subseteq U$ such that $s|_V = 0$. Now let $Q \in V \cap \mathrm{Supp} s$. Then $V$ is also a neighbourhood of $Q$ and $s|_V = 0$, which implies that $Q \notin \mathrm{Supp} s$, a contradiction. So we must have $P \in \mathrm{Supp} s$, which means that $\overline{\mathrm{Supp} s} = \mathrm{Supp} s$, and so it is a closed subset. 
\end{sol}

\begin{ex}
	Sheaf Hom. Let $\sF, \sG$ be sheaves of abelian groups on $X$. For any open set $U \subseteq X$, show that the set $\mathrm{Hom}(\sF|_U, \sG|_U)$ of morphisms of the restricted sheaves has a natural structure of abelian group. Show that the presheaf $U \mapsto \mathrm{Hom}(\sF|_U, \sG|_U)$ is a sheaf. It is called the sheaf of local morphisms of $\sF$ into $\sG$, "sheaf hom" for short, and it is denoted $Hom(\sF, \sG)$.
\end{ex}

\begin{sol}
	First let's make some observations about $\sF|_U$. Open sets of the subspace $U$ are just open sets $V \subseteq U$, as $U$ is open. So, in that case the limit $\varinjlim_{W \supseteq V} \sF(W) = \sF(V)$ so in that case the restriction presheaf is $V \mapsto \sF(V)$ and therefore it is already a sheaf, and its restriction morphisms are the same as the ones of $\sF$, but only on open sets $V \subseteq U$. Then, morphisms of sheaves $\varphi: \sF|_U \to \sG|_U$ are just morphisms of abelian groups $\varphi(V): \sF(V) \to \sG(V) \, \, \forall V \subseteq U$, that commute with restriction morphisms. We can define the sum of two morphisms $\varphi + \psi$ such that $(\varphi + \psi)(V)(x) = \varphi(V)(x) + \psi(V)(y)$. The sum is commutative and associative, as $\sG(V)$ are abelian groups. The morphism that sends each element to zero is the neutral element and every morphism has an inverse $-\varphi$ such that $(-\varphi)(V)(x) = -\varphi(V)(x) \, \, \forall V, \forall x$. Moreover, we can define the restrictions of the sheaf Hom naturally as $\rho_{UV}: \mathrm{Hom}(\sF|_U, \sG|_U) \to \mathrm{Hom}(\sF|_V, \sG|_V)$ as $\forall W \subseteq V \subseteq U, \varphi|_V (W) = \varphi(W)$.
\end{sol}





\end{document}