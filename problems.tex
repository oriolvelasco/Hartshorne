\documentclass[12pt]{article}

\usepackage{amsmath}
\usepackage{amsthm}
\usepackage{amssymb}
\usepackage{enumitem}
\usepackage{empheq}

\newcommand{\N}{\ensuremath{\mathbb{N}}}
\newcommand{\Z}{\ensuremath{\mathbb{Z}}}
\newcommand{\R}{\ensuremath{\mathbb{R}}}
\newcommand{\Q}{\ensuremath{\mathbb{Q}}}
\newcommand{\C}{\ensuremath{\mathbb{C}}}
\newcommand{\imp}{\ensuremath{\Rightarrow}}
\newcommand{\ip}{\ensuremath{\mathfrak{p}}}
\newcommand{\iq}{\ensuremath{\mathfrak{q}}}
\newcommand{\im}{\ensuremath{\mathfrak{m}}}
\newcommand{\ia}{\ensuremath{\mathfrak{a}}}
\newcommand{\ib}{\ensuremath{\mathfrak{b}}}
\newcommand{\Spec}{\ensuremath{\text{Spec}}}
\newcommand{\ima}{\ensuremath{\text{im}}}


\newcommand*\closure[1]{\overline{#1}}

\newtheorem{ex}{Exercise}[section]
\theoremstyle{definition}
\newtheorem*{sol}{Solution}

\DeclareFontFamily{U}{BOONDOX-calo}{\skewchar\font=45 }
\DeclareFontShape{U}{BOONDOX-calo}{m}{n}{
  <-> s*[1.00] BOONDOX-r-calo}{}
\DeclareFontShape{U}{BOONDOX-calo}{b}{n}{
  <-> s*[1.00] BOONDOX-b-calo}{}
\DeclareMathAlphabet{\mathcalboondox}{U}{BOONDOX-calo}{m}{n}
\SetMathAlphabet{\mathcalboondox}{bold}{U}{BOONDOX-calo}{b}{n}
\DeclareMathAlphabet{\mathbcalboondox}{U}{BOONDOX-calo}{b}{n}

\newcommand{\sF}{\ensuremath{\mathcalboondox{F}}}
\newcommand{\sG}{\ensuremath{\mathcalboondox{G}}}
\newcommand{\sA}{\ensuremath{\mathcalboondox{A}}}



\begin{document}

\title{Exercises Hartshorne}
\author{Oriol Velasco Falguera}
\maketitle

\section{Sheaves}

\begin{ex}
	Let $A$ be an abelian group, and define the constant presheaf associated to $A$ on the topological space $X$ to be the presheaf $U \mapsto A$ for all $U \neq \varnothing$, with restriction maps the identity. Show that the constant sheaf $\sA$ defined in the text is the sheaf associated to this presheaf.
\end{ex}

\begin{sol}
	Let $sF$ denote the constant presheaf. Let's first see that each stalk $\sF_P$ is a copy of $A$. Indeed, the elements of $\sF_P$ are represented by pairs $\langle U, s \rangle$, with $U$ open neighbourhood of $P$ and $s \in A$. As the restriction maps are the identity, two pairs $\langle U,s \rangle$ and $\langle V, t \rangle$ represent the same element if and only if $s = t$, so $\sF_P = A$.

	Let $s$ be an application from $U$ to $\bigcup_{P \in U} \sF_P$ satisfying properties (1) and (2) from the definition of associated sheaf. By (1), $s(P) \in \sF_P$ is an element of $A$, and therefore $s$ can be regarded as an application from $U$ to $A$ (that we will denote $s'$). In addition, let $B \subseteq A$. For each $P \in s'^{-1}(B), \, \exists V_{P}$ neighbourhood of $P$ such that $s'(V_P) = t \in B$. Then $s'^{-1}(B) = \bigcup_{P \in s'^{-1}(B)} V_P$ which is open. We have proved that the antiimage of every subset is open and therefore $s'$ is continuos with $A$ being given the discrete topology.

	Reciprocally, any countinuous application $s'$ from $U$ to $A$ can be regarded as an application $s$ from $U$ to $\bigcup_{P \in U} \sF_P$, defining $s(P) = s'(P) \in \sF_P$. This assignation guarantees that $s$ satisfies (1). In addition, for each $P \in U$, the set $V = s'^{-1}(s'(P))$ is an open neighbourhood of $P$ (by continuity of s'), and every $Q \in V$ has the same image $s'(P)$, which proves that $s$ satisfies (2).

	In conclusion, $\sF^{+}(U)$ is the group of continuous maps from $U$ into $A$, and therefore $\sF^{+}$ is indeed the sheaf $\sA$ defined in the text.
\end{sol}

\begin{ex}
	\begin{enumerate}[label=\alph*)]
		\item For any morphism of sheaves $\varphi: \sF \to \sG$ show that for each point $P$, $(\ker \varphi)_P = \ker(\varphi_P)$ and $(\ima \varphi)_P = \ima (\varphi_P)$.
		\item Show that $\varphi$ is injective (respectively surjective) if and only if the induced map on the stalks $\varphi_P$ is injective (respectilevy surjective) for all $P$.
		\item Show that a sequence $\dots \xrightarrow[]{} \sF^{i-1} \xrightarrow[]{\varphi^{i-1}} \sF^{i} \xrightarrow[]{\varphi^{i}} \sF^{i+1} \xrightarrow[]{} \dots$ of sheaves and morphisms is exact if and only if for each $P \in X$ the corresponding sequence of stalks is exact as a sequence of abelian groups.
	\end{enumerate}
\end{ex}

\begin{sol}
	\begin{enumerate}[label=\alph*)]
		\item $(\ker \varphi)_P = \{(U,s), \, s \in \ker(\varphi(U))\}$, modulo the usual germ equivalence relationship. Thus it can be regarded as a subset of $\sF_P$ as $\ker(\varphi(U)) \subseteq \sF(U)$. On the other side $\ker(\varphi_P)$ is a subset of $\sF_P$. To see that the two sets are equal it's enough to check the double inclusion. Let $\overline{(U,s)} \in (\ker \varphi)_P$. Then, $\varphi_P(\overline{(U,s)}) = \overline{(U, (\varphi(U))(s))} = \overline{(U,0)} = 0 \imp \overline{(U,s)} \in \ker(\varphi_P)$. Reciprocally, given $\overline{(U,s)} \in \ker(\varphi_P) \imp \exists V \subset U$ such that $\varphi(U)(s)|_V = 0$. As restrictions commute with morphisms of sheaves, $ \varphi(V)(s|_V) = \varphi(U)(s)|_V = 0$. Then, $\overline{(U,s)} = \overline{(V,s|_V)} \in (\ker\varphi)_P$. In conclusion, $(\ker \varphi)_P = \ker(\varphi_P)$.

		As $\sF_P = \sF^{+}_P$, $(\ima \varphi)_P$ is equal to the stack of the presheaf image at point P. $\ima (\varphi_P) = \{\overline{(U,s)} \in \sG_P \text{ such that } \exists \overline{(V,t)} \in \sF_P | \varphi_P(\overline{(V,t)} = \overline{(U,s)}\}$. But as $\varphi_P(\overline{(V,t)}) = \overline{(V, \varphi(V)(t))}$ then $\overline{(U,s)} \in \ima (\varphi_P) \iff \exists W$ neighbourhood of $P$, $W \subseteq V \cap U$ such that $\varphi(V)(t)|_W = s_W \iff \varphi(W)(t|_W) = s|_W \iff \overline{(U,s)} = \overline(W,\varphi(W)(t|_W)) \iff \overline{(U,s)} \in (\ima \varphi)_P$.

		\item $\varphi$ injective $\imp \ker \varphi = 0 \imp (\ker \phi)_P = 0 \, \forall P$. Using part a) of the problem, $\ker \varphi_P = (\ker \varphi)_P = 0 \imp \varphi_P$ is injective $\forall P$. Reciprocally, let $x \in \ker \varphi(U)$. $\forall P \in U, (\ker \phi)_P = 0$ so the image of $x$ in the stalk $(\ker \phi)_P$ is zero, which means that $\exists W_P \subseteq U$ neighbourhood of $P$ such that $x|_{W_P} = 0$. But open sets $W_P$ cover $U$ and therefore, by property (3) of the definition of shieves, $x = 0$. In conclusion, $\ker \varphi(U) = 0 \, \, \forall U \imp \ker \varphi = 0 \imp \varphi$ injective.

		We proceed similarly with the surjectivity. $\ima \varphi = \sG \imp (\ima \varphi)_P = \sG_P \imp \ima (\varphi_P) = \sG_P \imp \varphi_P$ surjective. To prove the other implication, First we will prove a fact that is stated but not proved in the text: $\sF^{+} \cong \sF$ if $\sF$ is already a sheaf. Given an open set $U$, let $V_P$ be the neighbourhood of $P$ contained in $U$ such that $\exists t \in \sF(V_P)$ such that $t_Q = s(Q) \, \forall Q \in V_P$. The sets $V_P$ cover $U$, and given two of these sets, $V,V'$ and the respective elements $t,t'$ we have that $\overline{(V',t')} = \overline{(V,t)}$ in every stalk $\sF_Q \imp \exists W_Q$ such that $t'|_{W_Q} = t|_{W_Q} \forall Q \in V \cap V'$. Then these $W_Q$ cover $V \cap V'$, and by property (3) applied to $t'|_{V\cap V'}-t_{V\cap V'}$, we have that $t_{V\cap V'} = t'_{V \cap V'}$. Then, by property (4) applied to the sets $V_P$, $\exists t \in \sF(U)$ such that $t_Q = s(Q) \, \, \forall Q \in U$, which means that each application $s$ is uniquely determined by $t \in \sF(U)$, and then $\sF^{+}(U) \cong \sF(U)$. Now it's easy to check that $\varphi$ is surjective. We have that $(\ima \varphi)_P = \ima (\varphi_P) = \sG_P$ and so we have that $\im \varphi (U)$ is the set of functions $s$ from $U$ to $\bigcup_{P \in U} \sG_P$, which means that $\ima \varphi$ is in fact $\sG^{+} \cong \sG$ as $\sG$ is already a sheaf.

		\item Given a sequence of sheaves and morphisms $\dots \xrightarrow[]{} \sF^{i-1} \xrightarrow[]{\varphi^{i-1}} \sF^{i} \xrightarrow[]{\varphi^{i}} \sF^{i+1} \xrightarrow[]{} \dots$, it is exact $\iff \ker \varphi^{i} = \ima \varphi^{i-1}$. If the sequence is exact, taking direct limits at both sides and using section a) we have that $\ker (\varphi^{i}_P) = (\ker \varphi^{i})_P = (\ima \varphi^{i-1})_P = \ima (\varphi^{i-1}_P) $, and so the sequence of stalks at each point $P$ is exact.

		The other implicaton is consequence of a more general result that we will prove now: Two subsheaves are equal $\iff$ the corresponding stalks at each point are equal. Let $\sF_1, \sF_2$ be two subsheaves of $\sF$, such that $(\sF_1)_P = (\sF_2)_P$. Let $t \in \sF_1(U)$. For every $P \in U \exists V_P$ neighbourhood of $P$ and $s \in \sF_2(V)$ such that $s_P = t_P$. The sets $V_P \cap U$ cover $U$, and given two of these sets, $V,V'$ and the respective elements $s,s'$ we have that $\overline{(V',s')} = \overline{(V,s)} = \overline{(U,t)}$ in every stalk $\sF_Q \imp \exists W_Q$ such that $s'|_{W_Q} = s|_{W_Q} \forall Q \in V \cap V'$. Then these $W_Q$ cover $V \cap V'$, and by property (3) applied to $s'|_{V\cap V'}-s|_{V\cap V'}$, we have that $s|_{V\cap V'} = s'|_{V \cap V'}$. Then, by property (4) applied to the sets $V_P \cap U$, $\exists r \in \sF_2(U)$ such that $t_P = r_P \forall P$. By property (3) applied to $r-t$ we get $s = t$ and so $t \in \sF_2(U)$. So $\sF_1(U) \subseteq \sF_2(U)$ and by symmetry $\sF_1(U) = \sF_2(U)$.
	\end{enumerate}
\end{sol}

\begin{ex}
	\begin{enumerate}[label=\alph*)]
		\item Let $\varphi: \sF \to \sG$ be a morphism of sheaves on $X$. Show that $\varphi$ is surjective if and only if the following condition holds: for every open set $U \subseteq X$, and for every $s \in \sG(U)$, there is a covering $\{U_i\}$ of $U$, and there are elements $t_i \in \sF(U_i)$, such that $\varphi(t_i) = s|_{U_i}$, for all i.

		\item Give an example of a surjective morphism of sheaves $\varphi: \sF \to \sG$ and an open set $U$ such that $\varphi(U): \sF(U) \to \sG(U)$ is not injective.
	\end{enumerate}
\end{ex}

\begin{sol}
	\begin{enumerate}[label=\alph*)]
		\item From problem 1.2, $\varphi$ is surjective $\iff$ the induced morphism on every stalk is. Suppose $\varphi_P$ is surjective, then given $U \subseteq X$ open set, $s \in \sG(U)$, $\forall P \in U \exists V$ neighbourhood of $P$ and $t \in \sF(V)$ such that $\overline{(U,s)} = \overline{(V,\varphi(t))} \imp \exists W_P \subseteq U \cap V$ such that $\varphi(t|_{W_P}) = s|_{W_P}$, and so $\{W_P\}$ is the covering that satisfies the desired property. Reciprocally, let $\overline{(U,s)} \in \sG_P$. Then $\forall P \in U \exists i$ such that $P \in U_i \imp \overline{(U,s)} = \overline{(U_i, \varphi(U_i)(t_i))} = \varphi_P(\overline{(U_i, t_i)}) \imp \varphi_P$ is surjective.

		\item
	\end{enumerate}
\end{sol}

\begin{ex}
	\begin{enumerate}[label=\alph*)]
		\item Let $\varphi: \sF \to \sG$ be a morphism of presheaves such that $\varphi(U): \sF(U) \to \sG(U)$ is injective foreach $U$. Show that the induced map $\varphi^{+}: \sF^{+} \to \sG^{+}$ of associated sheaves is injective.

		\item Use part (a) to show that if $\varphi: \sF \to \sG$ is a morphism of sheaves, then $\ima \varphi$ can be naturally identified with a subsheaf of $\sG$, as mentioned in the text.
	\end{enumerate}
\end{ex}

\begin{sol}
	\begin{enumerate}[label=\alph*)]
		\item Using 1.2 b) and the fact that $\sF^{+}_P = \sF_P$, the map $\varphi^{+}$ is injective $\iff$ the maps $\varphi_P: \sF_P \to \sG_P$ on the stalks are injective. Let $\overline{(U,s)} \in \sF_P$ such that $\varphi_P(\overline{(U,s)}) = 0 \imp \exists W \subset U$ such that $\varphi(U)(s)|_W = 0 \imp \varphi(W)(s|_W) = 0$. But as $\varphi(U)$ is injective $\forall U$, then $s|_W = 0$ and therefore $\overline{(U,s)} = \overline{(W,s|_W)} = 0$ and thus $\varphi_P$ is injective $\imp \varphi^{+}$ is injective.

		\item Let's consider the presheaf image of a morphism of sheaves $\varphi: \sF \to \sG$, $U \mapsto \ima (\varphi(U))$. Then for each $U$, $\ima (\varphi(U)) \subseteq \sG(U)$, and so the inclusion $i(U): \ima (\varphi(U)) \to \sG(U)$ is an injective morphism of abelian groups $\forall U$. Then, by section a), the induced map $i^{+}: \ima \varphi \to \sG^{+} = \sG$ is injective. 
	\end{enumerate}
\end{sol}

\begin{ex}
	Show that a morphism of sheaves is an isomphism if and only if it is both injective and surjective.
\end{ex}

\begin{sol}
	We know from Proposition $1.1$ that a morphism of sheaves $\varphi$ is an isomorphism $\iff$ the induced morphism on every stalk $\varphi_P$ is an isomorphism. But the induced morphisms on stalks are morphisms of abelian groups, so they're isomorphisms if and only if they're surjective and injective. Now using Exercise 1.2 b) this is equivalent to $\varphi$ being surjective and injective.
\end{sol}

\begin{ex}
	\begin{enumerate}[label=\alph*)]
		\item Let $\sF'$ be a subsheaf of a sheaf $\sF$. Show that the natural map of $\sF$ to the quotient sheaf $\sF / \sF'$ is surjective, and has kernel $\sF'$. Thus there is an exact sequence
		\[
			0 \to \sF' \to \sF \to \sF / \sF' \to 0
		\]

		\item Conversely, if $0 \to \sF' \to \sF \to \sF / \sF' \to 0$ is an exact sequence, show that $\sF'$ is isomorphic to a subsheaf of $\sF$ and that $\sF''$ is isomorphic to the quotient of $\sF$ by this subsheaf.
	\end{enumerate}
\end{ex}

\begin{sol}
	\textbf{Observation:} First we will prove the equivalent of Exercise 1.4 a) for surjectivity. Let $\varphi: \sF \to \sG$ be a morphism of presheaves such that $\varphi(U): \sF(U) \to \sG(U)$ is surjective for each $U$. Then the induced morphisms on stalks are also surjective: Given $\overline{(U,s)} \in \sG_P \exists t \in \sF(U)$ such that $\varphi(U)(t) = s \imp \overline{(U,s)} = \overline{(U, \varphi(U)(t))} = \varphi_P(\overline{(U,t)})$. By Exercise 1.2 b) and the fact that the stalks of the associated shief are equal to the stalks of the preshief ($\sF_P = \sF^{+}_P$), the induced morphism of shieves $\varphi^{+}: \sF^{+} \to \sG^{+}$ is surjective.
	\begin{enumerate}[label=\alph*)]
		\item The morphisms of abelian groups $\sF(U) \to \sF(U)/\sF'(U)$ are surjective $\forall U$. So by the observation above, the morphism of sheaves $\varphi: \sF \to \sF/\sF'$ is surjective. The fact that $\ker \varphi = \sF'$ is a consequence of the result proved in Exercise 1.2c. Indeed, $(\ker \varphi)_P = \ker (\varphi_P)$. As $\varphi_P: \sF_P \to (\sF/\sF')_P = \sF_P/\sF'_P$ are morphisms of abelian groups, their kernel is $\sF'_P$. So $\ker \varphi$ and $\sF'$ are 2 subssheaves of $\sF$ and their stalks at each point $P$ are equal so $\ker \varphi = \sF'$. In conclusion there is an exact sequence $0 \to \sF' \to \sF \to \sF / \sF' \to 0$.

		\item Let's name the applications of the sequence $\varphi, \psi$: $0 \xrightarrow[]{} \sF' \xrightarrow[]{\varphi} \sF \xrightarrow[]{\psi} \sF'' \xrightarrow[]{} 0$. The morphisms of abelian groups $\phi(U): \sF'(U) \xrightarrow[]{\varphi} \ima\varphi(U)$ define a morphism of presheaves. As $\phi(U)$ is surjective $\forall U$, using the observation above we have that $\sF' \to \ima \varphi$ is a surjective morphism of sheaves. Moreover, as $\varphi$ is injective, $\varphi(U): \sF'(U) \to \sF(U)$ is injective $\forall U \imp \phi(U): \sF'(U) \xrightarrow[]{\varphi} \ima \varphi(U)$ is injective $\forall U$, and by Exercise 1.4 a) $\sF' \to \ima \varphi$ is an injective morphism of sheaves. So $\sF' \to \ima \varphi$ is surjective and injective $\imp$ is an isomorphism, and, in conclusion, $\ima \varphi$ is the subsheaf of $\sF$ isomorphic to $\sF'$.

		The surjective morphism of sheaves $\psi: \sF \to \sF''$ induces surjective morphisms of abelian groups on stacks $\psi_P: \sF_P \to \sF''_P$, which induce isomorphisms $\overline{\psi_P}: \sF_P/\ker(\psi_P) \cong \sF''_P \, \, \forall P$ sending the class of an element $s_P$ to its image $\psi_P(s_P)$(*). 

		In addition, the morphisms of abelian groups $\psi(U): \sF(U) \to \sF''(U)$ also induce the morphism of presheaves $\psi(U): \sF(U)/\ker \psi(U) \to \sF''(U)$. To show that the map os associated sheaves $\sF/\ker \psi \to \sF''$ is an isomorphism, it is enoush to show that the corresponding morphisms on stalks $(\sF/\ker \psi)_P \to \sF''_P$ are isomorphisms. But, taking into account that $(\sF/\ker \psi)_P = \sF_P / (\ker \psi)_P = \sF_P / \ker(\psi_P)$, the corresponding morphisms on stalks are in fact the $\overline{\psi_P}$ and we already know that these are isomorphisms, so in conclusion $\sF/\ker \psi \cong \sF''$. Finally as the sequence $0 \xrightarrow[]{} \sF' \xrightarrow[]{\varphi} \sF \xrightarrow[]{\psi} \sF'' \xrightarrow[]{} 0$ is exact, $\ima \phi = \ker \psi$ and we are done.
	\end{enumerate}
\end{sol}

\begin{ex}
	Let $\varphi: \sF \to \sG$ be a morphism of sheaves.
	\begin{enumerate}[label=\alph*)]
		\item Show that $\ima \varphi \cong \sF/\ker \varphi$.
		\item Show that $\text{coker} \varphi \cong \sG /\ima \varphi$.
	\end{enumerate}
\end{ex}

\begin{sol}
	\begin{enumerate}[label=\alph*)]
		\item Given $\varphi: \sF \to \sG$ the observation on Exercise 1.6 shows that $\sF to \ima \varphi$ is surjective. Therefore we have an exact sequence $0 \to \ker \varphi \to \sF \to \ima \varphi \to 0$ and by Exercise 1.6 b) $\ima \varphi \cong \sF / \ker \varphi$.

		\item The identity map $\text{coker} \varphi (U) \to \sG(U)/ \ima \varphi(U)$ is surjective and injective (it is in fact the definition of the cokernel), and it defines a morphism of presheaves. Then, by Exercise 1.4a) and Observation on 1.6 the induced map of associated sheaves $\text{coker} \varphi \to \sG/ \ima \varphi$ is surjective and injective, $\imp \text{coker} \varphi \cong \sG/ \ima \varphi$.
	\end{enumerate}
\end{sol}


\end{document}